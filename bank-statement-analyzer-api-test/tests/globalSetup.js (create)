const { MongoMemoryServer } = require('mongodb-memory-server');

let mongoServer;

module.exports = async () => {
    mongoServer = await MongoMemoryServer.create({
        binary: {
            version: '7.0.0',
            skipMD5: true
        }
    });
    process.env.MONGO_URI = mongoServer.getUri();
};

module.exports.teardown = async () => {
    await mongoServer.stop();
};