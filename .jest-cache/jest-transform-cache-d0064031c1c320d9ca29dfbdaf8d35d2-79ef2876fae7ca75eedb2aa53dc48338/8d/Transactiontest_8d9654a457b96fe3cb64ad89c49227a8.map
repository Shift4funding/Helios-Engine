{"version":3,"names":["mongoose","require","Transaction","setupTestDatabase","cleanupTestDatabase","describe","beforeAll","afterAll","disconnect","afterEach","deleteMany","it","transaction","date","Date","description","amount","category","saved","save","expect","_id","toBeDefined","toBe","type","rejects","toThrow","Error","ValidationError"],"sources":["Transaction.test.js"],"sourcesContent":["const mongoose = require('mongoose');\r\nconst Transaction = require('../../src/models/Transaction');\r\nconst { setupTestDatabase, cleanupTestDatabase } = require('../helpers/testDb');\r\n\r\ndescribe('Transaction Model', () => {\r\n    beforeAll(async () => {\r\n        await setupTestDatabase();\r\n    });\r\n\r\n    afterAll(async () => {\r\n        await cleanupTestDatabase();\r\n        // Ensure mongoose connection is closed\r\n        await mongoose.disconnect();\r\n    });\r\n\r\n    afterEach(async () => {\r\n        await Transaction.deleteMany({});\r\n    });\r\n\r\n    it('should create a transaction with required fields', async () => {\r\n        const transaction = new Transaction({\r\n            date: new Date(),\r\n            description: 'Salary deposit',\r\n            amount: 5000,\r\n            category: 'income'\r\n        });\r\n\r\n        const saved = await transaction.save();\r\n        expect(saved._id).toBeDefined();\r\n        expect(saved.category).toBe('income');\r\n        expect(saved.type).toBe('uncategorized');\r\n    });\r\n\r\n    it('should fail validation without required fields', async () => {\r\n        const transaction = new Transaction({});\r\n        await expect(transaction.save()).rejects.toThrow(mongoose.Error.ValidationError);\r\n    });\r\n\r\n    it('should validate amount is a number', async () => {\r\n        const transaction = new Transaction({\r\n            date: new Date(),\r\n            description: 'Invalid amount',\r\n            amount: 'not-a-number'\r\n        });\r\n\r\n        await expect(transaction.save()).rejects.toThrow(mongoose.Error.ValidationError);\r\n    });\r\n\r\n    it('should enforce category enum values', async () => {\r\n        const transaction = new Transaction({\r\n            date: new Date(),\r\n            description: 'Test transaction',\r\n            amount: 100,\r\n            category: 'invalid-category'\r\n        });\r\n\r\n        await expect(transaction.save()).rejects.toThrow(mongoose.Error.ValidationError);\r\n    });\r\n});"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAMC,WAAW,GAAGD,OAAO,CAAC,8BAA8B,CAAC;AAC3D,MAAM;EAAEE,iBAAiB;EAAEC;AAAoB,CAAC,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AAE/EI,QAAQ,CAAC,mBAAmB,EAAE,MAAM;EAChCC,SAAS,CAAC,YAAY;IAClB,MAAMH,iBAAiB,CAAC,CAAC;EAC7B,CAAC,CAAC;EAEFI,QAAQ,CAAC,YAAY;IACjB,MAAMH,mBAAmB,CAAC,CAAC;IAC3B;IACA,MAAMJ,QAAQ,CAACQ,UAAU,CAAC,CAAC;EAC/B,CAAC,CAAC;EAEFC,SAAS,CAAC,YAAY;IAClB,MAAMP,WAAW,CAACQ,UAAU,CAAC,CAAC,CAAC,CAAC;EACpC,CAAC,CAAC;EAEFC,EAAE,CAAC,kDAAkD,EAAE,YAAY;IAC/D,MAAMC,WAAW,GAAG,IAAIV,WAAW,CAAC;MAChCW,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC;MAChBC,WAAW,EAAE,gBAAgB;MAC7BC,MAAM,EAAE,IAAI;MACZC,QAAQ,EAAE;IACd,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAG,MAAMN,WAAW,CAACO,IAAI,CAAC,CAAC;IACtCC,MAAM,CAACF,KAAK,CAACG,GAAG,CAAC,CAACC,WAAW,CAAC,CAAC;IAC/BF,MAAM,CAACF,KAAK,CAACD,QAAQ,CAAC,CAACM,IAAI,CAAC,QAAQ,CAAC;IACrCH,MAAM,CAACF,KAAK,CAACM,IAAI,CAAC,CAACD,IAAI,CAAC,eAAe,CAAC;EAC5C,CAAC,CAAC;EAEFZ,EAAE,CAAC,gDAAgD,EAAE,YAAY;IAC7D,MAAMC,WAAW,GAAG,IAAIV,WAAW,CAAC,CAAC,CAAC,CAAC;IACvC,MAAMkB,MAAM,CAACR,WAAW,CAACO,IAAI,CAAC,CAAC,CAAC,CAACM,OAAO,CAACC,OAAO,CAAC1B,QAAQ,CAAC2B,KAAK,CAACC,eAAe,CAAC;EACpF,CAAC,CAAC;EAEFjB,EAAE,CAAC,oCAAoC,EAAE,YAAY;IACjD,MAAMC,WAAW,GAAG,IAAIV,WAAW,CAAC;MAChCW,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC;MAChBC,WAAW,EAAE,gBAAgB;MAC7BC,MAAM,EAAE;IACZ,CAAC,CAAC;IAEF,MAAMI,MAAM,CAACR,WAAW,CAACO,IAAI,CAAC,CAAC,CAAC,CAACM,OAAO,CAACC,OAAO,CAAC1B,QAAQ,CAAC2B,KAAK,CAACC,eAAe,CAAC;EACpF,CAAC,CAAC;EAEFjB,EAAE,CAAC,qCAAqC,EAAE,YAAY;IAClD,MAAMC,WAAW,GAAG,IAAIV,WAAW,CAAC;MAChCW,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC;MAChBC,WAAW,EAAE,kBAAkB;MAC/BC,MAAM,EAAE,GAAG;MACXC,QAAQ,EAAE;IACd,CAAC,CAAC;IAEF,MAAMG,MAAM,CAACR,WAAW,CAACO,IAAI,CAAC,CAAC,CAAC,CAACM,OAAO,CAACC,OAAO,CAAC1B,QAAQ,CAAC2B,KAAK,CAACC,eAAe,CAAC;EACpF,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}