{"version":3,"names":["path","require","describe","OLD_ENV","process","env","beforeEach","jest","resetModules","NODE_ENV","PORT","HOST","API_KEY","RATE_LIMIT_MAX","RATE_LIMIT_WINDOW_MS","PERPLEXITY_API_KEY","PERPLEXITY_API_URL","LOG_LEVEL","LOG_FORMAT","afterAll","it","config","expect","server","port","toBe","host","logging","level","security","apiKey","isolateModules","toThrow"],"sources":["env.test.js"],"sourcesContent":["const path = require('path');\r\n\r\ndescribe('Environment Configuration', () => {\r\n    const OLD_ENV = process.env;\r\n\r\n    beforeEach(() => {\r\n        jest.resetModules();\r\n        process.env = {\r\n            ...OLD_ENV,\r\n            NODE_ENV: 'test',\r\n            PORT: '3001',\r\n            HOST: 'localhost',\r\n            API_KEY: 'test-api-key',\r\n            RATE_LIMIT_MAX: '100',\r\n            RATE_LIMIT_WINDOW_MS: '900000',\r\n            PERPLEXITY_API_KEY: 'test-perplexity-key',\r\n            PERPLEXITY_API_URL: 'https://api.test.com',\r\n            LOG_LEVEL: 'info',\r\n            LOG_FORMAT: 'combined'\r\n        };\r\n    });\r\n\r\n    afterAll(() => {\r\n        process.env = OLD_ENV;\r\n    });\r\n\r\n    it('should load configuration with default values', () => {\r\n        const config = require('../../src/config/env');\r\n        \r\n        expect(config.server.port).toBe(3001);\r\n        expect(config.server.host).toBe('localhost');\r\n        expect(config.logging.level).toBe('info');\r\n        expect(config.security.apiKey).toBe('test-api-key');\r\n    });\r\n\r\n    it('should throw error when required values are missing', () => {\r\n        delete process.env.API_KEY;\r\n        delete process.env.PERPLEXITY_API_KEY;\r\n        \r\n        expect(() => {\r\n            jest.isolateModules(() => {\r\n                require('../../src/config/env');\r\n            });\r\n        }).toThrow(/Missing required configuration/);\r\n    });\r\n\r\n    it('should override defaults with environment values', () => {\r\n        process.env.PORT = '4000';\r\n        process.env.LOG_LEVEL = 'debug';\r\n        \r\n        const config = require('../../src/config/env');\r\n        \r\n        expect(config.server.port).toBe(4000);\r\n        expect(config.logging.level).toBe('debug');\r\n    });\r\n});"],"mappings":";;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAE5BC,QAAQ,CAAC,2BAA2B,EAAE,MAAM;EACxC,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG;EAE3BC,UAAU,CAAC,MAAM;IACbC,IAAI,CAACC,YAAY,CAAC,CAAC;IACnBJ,OAAO,CAACC,GAAG,GAAG;MACV,GAAGF,OAAO;MACVM,QAAQ,EAAE,MAAM;MAChBC,IAAI,EAAE,MAAM;MACZC,IAAI,EAAE,WAAW;MACjBC,OAAO,EAAE,cAAc;MACvBC,cAAc,EAAE,KAAK;MACrBC,oBAAoB,EAAE,QAAQ;MAC9BC,kBAAkB,EAAE,qBAAqB;MACzCC,kBAAkB,EAAE,sBAAsB;MAC1CC,SAAS,EAAE,MAAM;MACjBC,UAAU,EAAE;IAChB,CAAC;EACL,CAAC,CAAC;EAEFC,QAAQ,CAAC,MAAM;IACXf,OAAO,CAACC,GAAG,GAAGF,OAAO;EACzB,CAAC,CAAC;EAEFiB,EAAE,CAAC,+CAA+C,EAAE,MAAM;IACtD,MAAMC,MAAM,GAAGpB,OAAO,CAAC,sBAAsB,CAAC;IAE9CqB,MAAM,CAACD,MAAM,CAACE,MAAM,CAACC,IAAI,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACrCH,MAAM,CAACD,MAAM,CAACE,MAAM,CAACG,IAAI,CAAC,CAACD,IAAI,CAAC,WAAW,CAAC;IAC5CH,MAAM,CAACD,MAAM,CAACM,OAAO,CAACC,KAAK,CAAC,CAACH,IAAI,CAAC,MAAM,CAAC;IACzCH,MAAM,CAACD,MAAM,CAACQ,QAAQ,CAACC,MAAM,CAAC,CAACL,IAAI,CAAC,cAAc,CAAC;EACvD,CAAC,CAAC;EAEFL,EAAE,CAAC,qDAAqD,EAAE,MAAM;IAC5D,OAAOhB,OAAO,CAACC,GAAG,CAACO,OAAO;IAC1B,OAAOR,OAAO,CAACC,GAAG,CAACU,kBAAkB;IAErCO,MAAM,CAAC,MAAM;MACTf,IAAI,CAACwB,cAAc,CAAC,MAAM;QACtB9B,OAAO,CAAC,sBAAsB,CAAC;MACnC,CAAC,CAAC;IACN,CAAC,CAAC,CAAC+B,OAAO,CAAC,gCAAgC,CAAC;EAChD,CAAC,CAAC;EAEFZ,EAAE,CAAC,kDAAkD,EAAE,MAAM;IACzDhB,OAAO,CAACC,GAAG,CAACK,IAAI,GAAG,MAAM;IACzBN,OAAO,CAACC,GAAG,CAACY,SAAS,GAAG,OAAO;IAE/B,MAAMI,MAAM,GAAGpB,OAAO,CAAC,sBAAsB,CAAC;IAE9CqB,MAAM,CAACD,MAAM,CAACE,MAAM,CAACC,IAAI,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACrCH,MAAM,CAACD,MAAM,CAACM,OAAO,CAACC,KAAK,CAAC,CAACH,IAAI,CAAC,OAAO,CAAC;EAC9C,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}