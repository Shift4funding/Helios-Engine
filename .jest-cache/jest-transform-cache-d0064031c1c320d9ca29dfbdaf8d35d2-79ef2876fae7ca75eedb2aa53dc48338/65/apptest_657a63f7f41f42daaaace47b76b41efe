8f509f0e43d5af4a3bebb7bf66fd8193
"use strict";

const request = require('supertest');
const app = require('../src/app');
describe('App Configuration', () => {
  test('should have security headers', async () => {
    const response = await request(app).get('/');
    expect(response.headers['x-content-type-options']).toBe('nosniff');
    expect(response.headers['x-frame-options']).toBe('DENY');
    expect(response.headers['x-xss-protection']).toBe('1; mode=block');
    expect(response.headers['strict-transport-security']).toBe('max-age=31536000; includeSubDomains');
  });
  test('should return 404 for unknown routes', async () => {
    const response = await request(app).get('/unknown-route').set('X-API-Key', process.env.API_KEY);
    expect(response.status).toBe(404);
    expect(response.body).toHaveProperty('status', 'error');
    expect(response.body).toHaveProperty('message');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsImRlc2NyaWJlIiwidGVzdCIsInJlc3BvbnNlIiwiZ2V0IiwiZXhwZWN0IiwiaGVhZGVycyIsInRvQmUiLCJzZXQiLCJwcm9jZXNzIiwiZW52IiwiQVBJX0tFWSIsInN0YXR1cyIsImJvZHkiLCJ0b0hhdmVQcm9wZXJ0eSJdLCJzb3VyY2VzIjpbImFwcC50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcclxuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vc3JjL2FwcCcpO1xyXG5cclxuZGVzY3JpYmUoJ0FwcCBDb25maWd1cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgc2VjdXJpdHkgaGVhZGVycycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoJy8nKTtcclxuICAgICAgICBcclxuICAgICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVyc1sneC1jb250ZW50LXR5cGUtb3B0aW9ucyddKS50b0JlKCdub3NuaWZmJyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmhlYWRlcnNbJ3gtZnJhbWUtb3B0aW9ucyddKS50b0JlKCdERU5ZJyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmhlYWRlcnNbJ3gteHNzLXByb3RlY3Rpb24nXSkudG9CZSgnMTsgbW9kZT1ibG9jaycpO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzWydzdHJpY3QtdHJhbnNwb3J0LXNlY3VyaXR5J10pXHJcbiAgICAgICAgICAgIC50b0JlKCdtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWlucycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiA0MDQgZm9yIHVua25vd24gcm91dGVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgICAgIC5nZXQoJy91bmtub3duLXJvdXRlJylcclxuICAgICAgICAgICAgLnNldCgnWC1BUEktS2V5JywgcHJvY2Vzcy5lbnYuQVBJX0tFWSk7XHJcblxyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDA0KTtcclxuICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycsICdlcnJvcicpO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnbWVzc2FnZScpO1xyXG4gICAgfSk7XHJcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsWUFBWSxDQUFDO0FBRWpDRSxRQUFRLENBQUMsbUJBQW1CLEVBQUUsTUFBTTtFQUNoQ0MsSUFBSSxDQUFDLDhCQUE4QixFQUFFLFlBQVk7SUFDN0MsTUFBTUMsUUFBUSxHQUFHLE1BQU1MLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQUNJLEdBQUcsQ0FBQyxHQUFHLENBQUM7SUFFNUNDLE1BQU0sQ0FBQ0YsUUFBUSxDQUFDRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ2xFRixNQUFNLENBQUNGLFFBQVEsQ0FBQ0csT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN4REYsTUFBTSxDQUFDRixRQUFRLENBQUNHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDbEVGLE1BQU0sQ0FBQ0YsUUFBUSxDQUFDRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxDQUNoREMsSUFBSSxDQUFDLHFDQUFxQyxDQUFDO0VBQ3BELENBQUMsQ0FBQztFQUVGTCxJQUFJLENBQUMsc0NBQXNDLEVBQUUsWUFBWTtJQUNyRCxNQUFNQyxRQUFRLEdBQUcsTUFBTUwsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDOUJJLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUNyQkksR0FBRyxDQUFDLFdBQVcsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU8sQ0FBQztJQUUxQ04sTUFBTSxDQUFDRixRQUFRLENBQUNTLE1BQU0sQ0FBQyxDQUFDTCxJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ2pDRixNQUFNLENBQUNGLFFBQVEsQ0FBQ1UsSUFBSSxDQUFDLENBQUNDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDO0lBQ3ZEVCxNQUFNLENBQUNGLFFBQVEsQ0FBQ1UsSUFBSSxDQUFDLENBQUNDLGNBQWMsQ0FBQyxTQUFTLENBQUM7RUFDbkQsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119