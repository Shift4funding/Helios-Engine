bede56ee54f3537121cc2217c9d45e23
"use strict";

_getJestObj().mock('../../src/config/env', () => require('../mocks/configMock'));
_getJestObj().mock('../../src/middleware/rateLimiter', () => require('../mocks/redisRateLimiterMock'));
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const securityMiddleware = require('../../src/middleware/security');
const config = require('../../src/config/env');
const fs = require('fs').promises;
const path = require('path');
describe('Security Middleware', () => {
  let mockReq;
  let mockRes;
  let nextFunction;
  beforeEach(() => {
    mockReq = {
      body: {
        test: '<script>alert("xss")</script>',
        html: '<p>Hello <script>bad</script></p>'
      },
      params: {
        id: {
          $gt: ''
        }
      },
      query: {
        filter: '; DROP TABLE users;'
      },
      file: null
    };
    mockRes = {
      status: jest.fn().mockReturnThis(),
      json: jest.fn(),
      setHeader: jest.fn()
    };
    nextFunction = jest.fn();
  });
  describe('sanitizeData', () => {
    it('should sanitize HTML and remove malicious content', () => {
      securityMiddleware.sanitizeData(mockReq, mockRes, nextFunction);
      expect(mockReq.body.test).toBe('alert("xss")');
      expect(mockReq.body.html).toBe('Hello');
      expect(nextFunction).toHaveBeenCalled();
    });
    it('should sanitize MongoDB injection attempts', () => {
      securityMiddleware.sanitizeData(mockReq, mockRes, nextFunction);
      expect(mockReq.params.id).not.toHaveProperty('$gt');
      expect(mockReq.query.filter).toBe('DROP TABLE users;');
    });
  });
  describe('rateLimiter', () => {
    it('should block excessive requests', async () => {
      const req = {
        ip: '127.0.0.1'
      };
      const middleware = await securityMiddleware.rateLimiter(req, mockRes, nextFunction);

      // Simulate multiple requests
      for (let i = 0; i <= config.security.rateLimit.max; i++) {
        await middleware(req, mockRes, nextFunction);
      }

      // Verify the last request was blocked
      expect(mockRes.status).toHaveBeenCalledWith(429);
      expect(mockRes.json).toHaveBeenCalledWith(expect.objectContaining({
        error: 'Too many requests'
      }));
    });
  });
  describe('validatePDF', () => {
    beforeAll(async () => {
      // Create test PDF buffer
      const pdfPath = path.join(__dirname, '../fixtures/test.pdf');
      const pdfExists = await fs.access(pdfPath).then(() => true).catch(() => false);
      if (!pdfExists) {
        // Create a minimal valid PDF for testing
        const minimalPDF = '%PDF-1.4\n%EOF';
        await fs.writeFile(pdfPath, minimalPDF);
      }
    });
    it('should validate a legitimate PDF file', async () => {
      const pdfBuffer = await fs.readFile(path.join(__dirname, '../fixtures/test.pdf'));
      mockReq.file = {
        buffer: pdfBuffer,
        size: 1024 * 1024,
        mimetype: 'application/pdf'
      };
      await securityMiddleware.validatePDF(mockReq, mockRes, nextFunction);
      expect(mockReq.fileMetadata.hash).toBeDefined();
      expect(mockReq.fileMetadata.hash).toMatch(/^[a-f0-9]{64}$/); // SHA-256 hash format
    });
    it('should reject oversized files', async () => {
      mockReq.file = {
        buffer: Buffer.alloc(6 * 1024 * 1024),
        size: 6 * 1024 * 1024,
        mimetype: 'application/pdf'
      };
      await securityMiddleware.validatePDF(mockReq, mockRes, nextFunction);
      expect(mockRes.status).toHaveBeenCalledWith(400);
      expect(mockRes.json).toHaveBeenCalledWith({
        error: 'File too large. Maximum size is 5MB.'
      });
    });
    it('should reject non-PDF files', async () => {
      mockReq.file = {
        buffer: Buffer.from('fake image data'),
        size: 1024,
        mimetype: 'image/jpeg'
      };
      await securityMiddleware.validatePDF(mockReq, mockRes, nextFunction);
      expect(mockRes.status).toHaveBeenCalledWith(400);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJyZXF1aXJlIiwiamVzdCIsInNlY3VyaXR5TWlkZGxld2FyZSIsImNvbmZpZyIsImZzIiwicHJvbWlzZXMiLCJwYXRoIiwiZGVzY3JpYmUiLCJtb2NrUmVxIiwibW9ja1JlcyIsIm5leHRGdW5jdGlvbiIsImJlZm9yZUVhY2giLCJib2R5IiwidGVzdCIsImh0bWwiLCJwYXJhbXMiLCJpZCIsIiRndCIsInF1ZXJ5IiwiZmlsdGVyIiwiZmlsZSIsInN0YXR1cyIsImZuIiwibW9ja1JldHVyblRoaXMiLCJqc29uIiwic2V0SGVhZGVyIiwiaXQiLCJzYW5pdGl6ZURhdGEiLCJleHBlY3QiLCJ0b0JlIiwidG9IYXZlQmVlbkNhbGxlZCIsIm5vdCIsInRvSGF2ZVByb3BlcnR5IiwicmVxIiwiaXAiLCJtaWRkbGV3YXJlIiwicmF0ZUxpbWl0ZXIiLCJpIiwic2VjdXJpdHkiLCJyYXRlTGltaXQiLCJtYXgiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9iamVjdENvbnRhaW5pbmciLCJlcnJvciIsImJlZm9yZUFsbCIsInBkZlBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwicGRmRXhpc3RzIiwiYWNjZXNzIiwidGhlbiIsImNhdGNoIiwibWluaW1hbFBERiIsIndyaXRlRmlsZSIsInBkZkJ1ZmZlciIsInJlYWRGaWxlIiwiYnVmZmVyIiwic2l6ZSIsIm1pbWV0eXBlIiwidmFsaWRhdGVQREYiLCJmaWxlTWV0YWRhdGEiLCJoYXNoIiwidG9CZURlZmluZWQiLCJ0b01hdGNoIiwiQnVmZmVyIiwiYWxsb2MiLCJmcm9tIl0sInNvdXJjZXMiOlsic2VjdXJpdHkudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJqZXN0Lm1vY2soJy4uLy4uL3NyYy9jb25maWcvZW52JywgKCkgPT4gXHJcbiAgICByZXF1aXJlKCcuLi9tb2Nrcy9jb25maWdNb2NrJylcclxuKTtcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvbWlkZGxld2FyZS9yYXRlTGltaXRlcicsICgpID0+IFxyXG4gICAgcmVxdWlyZSgnLi4vbW9ja3MvcmVkaXNSYXRlTGltaXRlck1vY2snKVxyXG4pO1xyXG5cclxuY29uc3Qgc2VjdXJpdHlNaWRkbGV3YXJlID0gcmVxdWlyZSgnLi4vLi4vc3JjL21pZGRsZXdhcmUvc2VjdXJpdHknKTtcclxuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi4vLi4vc3JjL2NvbmZpZy9lbnYnKTtcclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpLnByb21pc2VzO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5cclxuZGVzY3JpYmUoJ1NlY3VyaXR5IE1pZGRsZXdhcmUnLCAoKSA9PiB7XHJcbiAgICBsZXQgbW9ja1JlcTtcclxuICAgIGxldCBtb2NrUmVzO1xyXG4gICAgbGV0IG5leHRGdW5jdGlvbjtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICBtb2NrUmVxID0ge1xyXG4gICAgICAgICAgICBib2R5OiB7IFxyXG4gICAgICAgICAgICAgICAgdGVzdDogJzxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD4nLFxyXG4gICAgICAgICAgICAgICAgaHRtbDogJzxwPkhlbGxvIDxzY3JpcHQ+YmFkPC9zY3JpcHQ+PC9wPidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcGFyYW1zOiB7IGlkOiB7ICRndDogJycgfSB9LFxyXG4gICAgICAgICAgICBxdWVyeTogeyBmaWx0ZXI6ICc7IERST1AgVEFCTEUgdXNlcnM7JyB9LFxyXG4gICAgICAgICAgICBmaWxlOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBtb2NrUmVzID0ge1xyXG4gICAgICAgICAgICBzdGF0dXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgICAgICBqc29uOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIHNldEhlYWRlcjogamVzdC5mbigpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBuZXh0RnVuY3Rpb24gPSBqZXN0LmZuKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnc2FuaXRpemVEYXRhJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgc2FuaXRpemUgSFRNTCBhbmQgcmVtb3ZlIG1hbGljaW91cyBjb250ZW50JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWN1cml0eU1pZGRsZXdhcmUuc2FuaXRpemVEYXRhKG1vY2tSZXEsIG1vY2tSZXMsIG5leHRGdW5jdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1JlcS5ib2R5LnRlc3QpLnRvQmUoJ2FsZXJ0KFwieHNzXCIpJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrUmVxLmJvZHkuaHRtbCkudG9CZSgnSGVsbG8nKTtcclxuICAgICAgICAgICAgZXhwZWN0KG5leHRGdW5jdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNhbml0aXplIE1vbmdvREIgaW5qZWN0aW9uIGF0dGVtcHRzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWN1cml0eU1pZGRsZXdhcmUuc2FuaXRpemVEYXRhKG1vY2tSZXEsIG1vY2tSZXMsIG5leHRGdW5jdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1JlcS5wYXJhbXMuaWQpLm5vdC50b0hhdmVQcm9wZXJ0eSgnJGd0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrUmVxLnF1ZXJ5LmZpbHRlcikudG9CZSgnRFJPUCBUQUJMRSB1c2VyczsnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdyYXRlTGltaXRlcicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGJsb2NrIGV4Y2Vzc2l2ZSByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxID0geyBpcDogJzEyNy4wLjAuMScgfTtcclxuICAgICAgICAgICAgY29uc3QgbWlkZGxld2FyZSA9IGF3YWl0IHNlY3VyaXR5TWlkZGxld2FyZS5yYXRlTGltaXRlcihyZXEsIG1vY2tSZXMsIG5leHRGdW5jdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBtdWx0aXBsZSByZXF1ZXN0c1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBjb25maWcuc2VjdXJpdHkucmF0ZUxpbWl0Lm1heDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBtaWRkbGV3YXJlKHJlcSwgbW9ja1JlcywgbmV4dEZ1bmN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBsYXN0IHJlcXVlc3Qgd2FzIGJsb2NrZWRcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tSZXMuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MjkpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1Jlcy5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1RvbyBtYW55IHJlcXVlc3RzJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd2YWxpZGF0ZVBERicsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGVzdCBQREYgYnVmZmVyXHJcbiAgICAgICAgICAgIGNvbnN0IHBkZlBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vZml4dHVyZXMvdGVzdC5wZGYnKTtcclxuICAgICAgICAgICAgY29uc3QgcGRmRXhpc3RzID0gYXdhaXQgZnMuYWNjZXNzKHBkZlBhdGgpLnRoZW4oKCkgPT4gdHJ1ZSkuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFwZGZFeGlzdHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIG1pbmltYWwgdmFsaWQgUERGIGZvciB0ZXN0aW5nXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5pbWFsUERGID0gJyVQREYtMS40XFxuJUVPRic7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBmcy53cml0ZUZpbGUocGRmUGF0aCwgbWluaW1hbFBERik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhIGxlZ2l0aW1hdGUgUERGIGZpbGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBkZkJ1ZmZlciA9IGF3YWl0IGZzLnJlYWRGaWxlKFxyXG4gICAgICAgICAgICAgICAgcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL2ZpeHR1cmVzL3Rlc3QucGRmJylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbW9ja1JlcS5maWxlID0ge1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyOiBwZGZCdWZmZXIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiAxMDI0ICogMTAyNCxcclxuICAgICAgICAgICAgICAgIG1pbWV0eXBlOiAnYXBwbGljYXRpb24vcGRmJ1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgc2VjdXJpdHlNaWRkbGV3YXJlLnZhbGlkYXRlUERGKG1vY2tSZXEsIG1vY2tSZXMsIG5leHRGdW5jdGlvbik7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrUmVxLmZpbGVNZXRhZGF0YS5oYXNoKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1JlcS5maWxlTWV0YWRhdGEuaGFzaCkudG9NYXRjaCgvXlthLWYwLTldezY0fSQvKTsgLy8gU0hBLTI1NiBoYXNoIGZvcm1hdFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJlamVjdCBvdmVyc2l6ZWQgZmlsZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1vY2tSZXEuZmlsZSA9IHtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlcjogQnVmZmVyLmFsbG9jKDYgKiAxMDI0ICogMTAyNCksXHJcbiAgICAgICAgICAgICAgICBzaXplOiA2ICogMTAyNCAqIDEwMjQsXHJcbiAgICAgICAgICAgICAgICBtaW1ldHlwZTogJ2FwcGxpY2F0aW9uL3BkZidcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHNlY3VyaXR5TWlkZGxld2FyZS52YWxpZGF0ZVBERihtb2NrUmVxLCBtb2NrUmVzLCBuZXh0RnVuY3Rpb24pO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1Jlcy5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrUmVzLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnRmlsZSB0b28gbGFyZ2UuIE1heGltdW0gc2l6ZSBpcyA1TUIuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZWplY3Qgbm9uLVBERiBmaWxlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja1JlcS5maWxlID0ge1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyOiBCdWZmZXIuZnJvbSgnZmFrZSBpbWFnZSBkYXRhJyksXHJcbiAgICAgICAgICAgICAgICBzaXplOiAxMDI0LFxyXG4gICAgICAgICAgICAgICAgbWltZXR5cGU6ICdpbWFnZS9qcGVnJ1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgc2VjdXJpdHlNaWRkbGV3YXJlLnZhbGlkYXRlUERGKG1vY2tSZXEsIG1vY2tSZXMsIG5leHRGdW5jdGlvbik7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrUmVzLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTsiXSwibWFwcGluZ3MiOiI7O0FBQUFBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLHNCQUFzQixFQUFFLE1BQzlCQyxPQUFPLENBQUMscUJBQXFCLENBQ2pDLENBQUM7QUFDREYsV0FBQSxHQUFLQyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsTUFDMUNDLE9BQU8sQ0FBQywrQkFBK0IsQ0FDM0MsQ0FBQztBQUFDLFNBQUFGLFlBQUE7RUFBQTtJQUFBRztFQUFBLElBQUFELE9BQUE7RUFBQUYsV0FBQSxHQUFBQSxDQUFBLEtBQUFHLElBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFFRixNQUFNQyxrQkFBa0IsR0FBR0YsT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQ25FLE1BQU1HLE1BQU0sR0FBR0gsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQzlDLE1BQU1JLEVBQUUsR0FBR0osT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDSyxRQUFRO0FBQ2pDLE1BQU1DLElBQUksR0FBR04sT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUU1Qk8sUUFBUSxDQUFDLHFCQUFxQixFQUFFLE1BQU07RUFDbEMsSUFBSUMsT0FBTztFQUNYLElBQUlDLE9BQU87RUFDWCxJQUFJQyxZQUFZO0VBRWhCQyxVQUFVLENBQUMsTUFBTTtJQUNiSCxPQUFPLEdBQUc7TUFDTkksSUFBSSxFQUFFO1FBQ0ZDLElBQUksRUFBRSwrQkFBK0I7UUFDckNDLElBQUksRUFBRTtNQUNWLENBQUM7TUFDREMsTUFBTSxFQUFFO1FBQUVDLEVBQUUsRUFBRTtVQUFFQyxHQUFHLEVBQUU7UUFBRztNQUFF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