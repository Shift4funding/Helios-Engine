{"version":3,"names":["logger","require","AppError","Error","constructor","statusCode","message","status","startsWith","captureStackTrace","errorHandler","err","req","res","next","process","env","NODE_ENV","error","stack","json","isOperational","module","exports"],"sources":["errorHandler.js"],"sourcesContent":["const logger = require('../config/logger');\r\n\r\nclass AppError extends Error {\r\n    constructor(statusCode, message) {\r\n        super(message);\r\n        this.statusCode = statusCode;\r\n        this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n}\r\n\r\nconst errorHandler = (err, req, res, next) => {\r\n    err.statusCode = err.statusCode || 500;\r\n    err.status = err.status || 'error';\r\n\r\n    if (process.env.NODE_ENV === 'development') {\r\n        logger.error('Error ðŸ’¥:', {\r\n            status: err.status,\r\n            error: err,\r\n            message: err.message,\r\n            stack: err.stack\r\n        });\r\n\r\n        return res.status(err.statusCode).json({\r\n            status: err.status,\r\n            error: err,\r\n            message: err.message,\r\n            stack: err.stack\r\n        });\r\n    }\r\n\r\n    // Production error response\r\n    logger.error('Error ðŸ’¥:', err);\r\n\r\n    if (err.isOperational) {\r\n        return res.status(err.statusCode).json({\r\n            status: err.status,\r\n            message: err.message\r\n        });\r\n    }\r\n\r\n    // Programming or unknown errors\r\n    return res.status(500).json({\r\n        status: 'error',\r\n        message: 'Something went wrong!'\r\n    });\r\n};\r\n\r\nmodule.exports = { AppError, errorHandler };"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAE1C,MAAMC,QAAQ,SAASC,KAAK,CAAC;EACzBC,WAAWA,CAACC,UAAU,EAAEC,OAAO,EAAE;IAC7B,KAAK,CAACA,OAAO,CAAC;IACd,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,MAAM,GAAG,GAAGF,UAAU,EAAE,CAACG,UAAU,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,OAAO;IAChEL,KAAK,CAACM,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACL,WAAW,CAAC;EACnD;AACJ;AAEA,MAAMM,YAAY,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC1CH,GAAG,CAACN,UAAU,GAAGM,GAAG,CAACN,UAAU,IAAI,GAAG;EACtCM,GAAG,CAACJ,MAAM,GAAGI,GAAG,CAACJ,MAAM,IAAI,OAAO;EAElC,IAAIQ,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;IACxCjB,MAAM,CAACkB,KAAK,CAAC,WAAW,EAAE;MACtBX,MAAM,EAAEI,GAAG,CAACJ,MAAM;MAClBW,KAAK,EAAEP,GAAG;MACVL,OAAO,EAAEK,GAAG,CAACL,OAAO;MACpBa,KAAK,EAAER,GAAG,CAACQ;IACf,CAAC,CAAC;IAEF,OAAON,GAAG,CAACN,MAAM,CAACI,GAAG,CAACN,UAAU,CAAC,CAACe,IAAI,CAAC;MACnCb,MAAM,EAAEI,GAAG,CAACJ,MAAM;MAClBW,KAAK,EAAEP,GAAG;MACVL,OAAO,EAAEK,GAAG,CAACL,OAAO;MACpBa,KAAK,EAAER,GAAG,CAACQ;IACf,CAAC,CAAC;EACN;;EAEA;EACAnB,MAAM,CAACkB,KAAK,CAAC,WAAW,EAAEP,GAAG,CAAC;EAE9B,IAAIA,GAAG,CAACU,aAAa,EAAE;IACnB,OAAOR,GAAG,CAACN,MAAM,CAACI,GAAG,CAACN,UAAU,CAAC,CAACe,IAAI,CAAC;MACnCb,MAAM,EAAEI,GAAG,CAACJ,MAAM;MAClBD,OAAO,EAAEK,GAAG,CAACL;IACjB,CAAC,CAAC;EACN;;EAEA;EACA,OAAOO,GAAG,CAACN,MAAM,CAAC,GAAG,CAAC,CAACa,IAAI,CAAC;IACxBb,MAAM,EAAE,OAAO;IACfD,OAAO,EAAE;EACb,CAAC,CAAC;AACN,CAAC;AAEDgB,MAAM,CAACC,OAAO,GAAG;EAAErB,QAAQ;EAAEQ;AAAa,CAAC","ignoreList":[]}