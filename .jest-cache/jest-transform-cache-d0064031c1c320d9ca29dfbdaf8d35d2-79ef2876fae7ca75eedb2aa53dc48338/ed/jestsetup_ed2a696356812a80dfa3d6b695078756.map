{"version":3,"names":["_getJestObj","mock","mockLogger","jest","fn","mockImplementation","analyzeText","mockResolvedValue","category","getSuggestions","get","set","del","BayesClassifier","addDocument","train","classify","mockReturnValue","require","setTimeout","error","info","warn","debug","global","__mocks__","logger","afterEach","clearAllMocks","resetModules","process","on","console","log"],"sources":["jest.setup.js"],"sourcesContent":["jest.setTimeout(30000);\r\n\r\n// Setup global mocks\r\nconst mockLogger = {\r\n    error: jest.fn(),\r\n    info: jest.fn(),\r\n    warn: jest.fn(),\r\n    debug: jest.fn()\r\n};\r\n\r\n// Mock modules before any tests run\r\njest.mock('./src/config/logger', () => mockLogger);\r\njest.mock('./src/services/perplexityService', () => {\r\n    return jest.fn().mockImplementation(() => ({\r\n        analyzeText: jest.fn().mockResolvedValue({ category: 'uncategorized' }),\r\n        getSuggestions: jest.fn().mockResolvedValue([])\r\n    }));\r\n});\r\n\r\njest.mock('./src/services/RedisService', () => ({\r\n    get: jest.fn().mockResolvedValue(null),\r\n    set: jest.fn().mockResolvedValue('OK'),\r\n    del: jest.fn().mockResolvedValue(1)\r\n}));\r\n\r\njest.mock('natural', () => ({\r\n    BayesClassifier: jest.fn().mockImplementation(() => ({\r\n        addDocument: jest.fn(),\r\n        train: jest.fn(),\r\n        classify: jest.fn().mockReturnValue('uncategorized')\r\n    }))\r\n}));\r\n\r\n// Make mocks available globally\r\nglobal.__mocks__ = {\r\n    logger: mockLogger\r\n};\r\n\r\n// Cleanup all mocks after each test\r\nafterEach(() => {\r\n    jest.clearAllMocks();\r\n    jest.resetModules();\r\n});\r\n\r\n// Handle unhandled promise rejections\r\nprocess.on('unhandledRejection', (error) => {\r\n    console.error('Unhandled Promise Rejection:', error);\r\n});\r\n\r\n// Global test setup\r\nglobal.console = {\r\n    ...console,\r\n    error: jest.fn(),\r\n    warn: jest.fn(),\r\n    log: jest.fn()\r\n};"],"mappings":";;AAUA;AACAA,WAAA,GAAKC,IAAI,CAAC,qBAAqB,EAAE,MAAMC,UAAU,CAAC;AAClDF,WAAA,GAAKC,IAAI,CAAC,kCAAkC,EAAE,MAAM;EAChD,OAAOE,IAAI,CAACC,EAAE,CAAC,CAAC,CAACC,kBAAkB,CAAC,OAAO;IACvCC,WAAW,EAAEH,IAAI,CAACC,EAAE,CAAC,CAAC,CAACG,iBAAiB,CAAC;MAAEC,QAAQ,EAAE;IAAgB,CAAC,CAAC;IACvEC,cAAc,EAAEN,IAAI,CAACC,EAAE,CAAC,CAAC,CAACG,iBAAiB,CAAC,EAAE;EAClD,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEFP,WAAA,GAAKC,IAAI,CAAC,6BAA6B,EAAE,OAAO;EAC5CS,GAAG,EAAEP,IAAI,CAACC,EAAE,CAAC,CAAC,CAACG,iBAAiB,CAAC,IAAI,CAAC;EACtCI,GAAG,EAAER,IAAI,CAACC,EAAE,CAAC,CAAC,CAACG,iBAAiB,CAAC,IAAI,CAAC;EACtCK,GAAG,EAAET,IAAI,CAACC,EAAE,CAAC,CAAC,CAACG,iBAAiB,CAAC,CAAC;AACtC,CAAC,CAAC,CAAC;AAEHP,WAAA,GAAKC,IAAI,CAAC,SAAS,EAAE,OAAO;EACxBY,eAAe,EAAEV,IAAI,CAACC,EAAE,CAAC,CAAC,CAACC,kBAAkB,CAAC,OAAO;IACjDS,WAAW,EAAEX,IAAI,CAACC,EAAE,CAAC,CAAC;IACtBW,KAAK,EAAEZ,IAAI,CAACC,EAAE,CAAC,CAAC;IAChBY,QAAQ,EAAEb,IAAI,CAACC,EAAE,CAAC,CAAC,CAACa,eAAe,CAAC,eAAe;EACvD,CAAC,CAAC;AACN,CAAC,CAAC,CAAC;;AAEH;AAAA,SAAAjB,YAAA;EAAA;IAAAG;EAAA,IAAAe,OAAA;EAAAlB,WAAA,GAAAA,CAAA,KAAAG,IAAA;EAAA,OAAAA,IAAA;AAAA;AAjCAA,IAAI,CAACgB,UAAU,CAAC,KAAK,CAAC;;AAEtB;AACA,MAAMjB,UAAU,GAAG;EACfkB,KAAK,EAAEjB,IAAI,CAACC,EAAE,CAAC,CAAC;EAChBiB,IAAI,EAAElB,IAAI,CAACC,EAAE,CAAC,CAAC;EACfkB,IAAI,EAAEnB,IAAI,CAACC,EAAE,CAAC,CAAC;EACfmB,KAAK,EAAEpB,IAAI,CAACC,EAAE,CAAC;AACnB,CAAC;AA0BDoB,MAAM,CAACC,SAAS,GAAG;EACfC,MAAM,EAAExB;AACZ,CAAC;;AAED;AACAyB,SAAS,CAAC,MAAM;EACZxB,IAAI,CAACyB,aAAa,CAAC,CAAC;EACpBzB,IAAI,CAAC0B,YAAY,CAAC,CAAC;AACvB,CAAC,CAAC;;AAEF;AACAC,OAAO,CAACC,EAAE,CAAC,oBAAoB,EAAGX,KAAK,IAAK;EACxCY,OAAO,CAACZ,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;AACxD,CAAC,CAAC;;AAEF;AACAI,MAAM,CAACQ,OAAO,GAAG;EACb,GAAGA,OAAO;EACVZ,KAAK,EAAEjB,IAAI,CAACC,EAAE,CAAC,CAAC;EAChBkB,IAAI,EAAEnB,IAAI,CAACC,EAAE,CAAC,CAAC;EACf6B,GAAG,EAAE9B,IAAI,CAACC,EAAE,CAAC;AACjB,CAAC","ignoreList":[]}