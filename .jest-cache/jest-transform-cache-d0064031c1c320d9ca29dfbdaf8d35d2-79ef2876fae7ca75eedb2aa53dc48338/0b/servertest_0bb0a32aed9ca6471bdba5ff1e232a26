ecb65030d8961fb4b60f248d6dd355c2
"use strict";

const request = require('supertest');
const app = require('../../src/app');
const {
  setupTestDatabase,
  cleanupTestDatabase
} = require('../helpers/testDb');
describe('Server Integration Tests', () => {
  beforeAll(async () => {
    await setupTestDatabase();
  });
  afterAll(async () => {
    await cleanupTestDatabase();
  });
  describe('Basic Server Functionality', () => {
    it('should respond to health check', async () => {
      const response = await request(app).get('/health').expect(200);
      expect(response.body).toEqual({
        status: 'success',
        message: 'Server is healthy'
      });
    });
    it('should handle 404 routes', async () => {
      const response = await request(app).get('/not-existing-route').expect(404);
      expect(response.body).toEqual({
        status: 'fail',
        message: 'Route not found'
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsInNldHVwVGVzdERhdGFiYXNlIiwiY2xlYW51cFRlc3REYXRhYmFzZSIsImRlc2NyaWJlIiwiYmVmb3JlQWxsIiwiYWZ0ZXJBbGwiLCJpdCIsInJlc3BvbnNlIiwiZ2V0IiwiZXhwZWN0IiwiYm9keSIsInRvRXF1YWwiLCJzdGF0dXMiLCJtZXNzYWdlIl0sInNvdXJjZXMiOlsic2VydmVyLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xyXG5jb25zdCBhcHAgPSByZXF1aXJlKCcuLi8uLi9zcmMvYXBwJyk7XHJcbmNvbnN0IHsgc2V0dXBUZXN0RGF0YWJhc2UsIGNsZWFudXBUZXN0RGF0YWJhc2UgfSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdGVzdERiJyk7XHJcblxyXG5kZXNjcmliZSgnU2VydmVyIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCBzZXR1cFRlc3REYXRhYmFzZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IGNsZWFudXBUZXN0RGF0YWJhc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdCYXNpYyBTZXJ2ZXIgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHJlc3BvbmQgdG8gaGVhbHRoIGNoZWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxyXG4gICAgICAgICAgICAgICAgLmdldCgnL2hlYWx0aCcpXHJcbiAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTZXJ2ZXIgaXMgaGVhbHRoeSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIDQwNCByb3V0ZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgICAgICAgICAuZ2V0KCcvbm90LWV4aXN0aW5nLXJvdXRlJylcclxuICAgICAgICAgICAgICAgIC5leHBlY3QoNDA0KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcclxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2ZhaWwnLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1JvdXRlIG5vdCBmb3VuZCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7Il0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxNQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDcEMsTUFBTTtFQUFFRSxpQkFBaUI7RUFBRUM7QUFBb0IsQ0FBQyxHQUFHSCxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFFL0VJLFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxNQUFNO0VBQ3ZDQyxTQUFTLENBQUMsWUFBWTtJQUNsQixNQUFNSCxpQkFBaUIsQ0FBQyxDQUFDO0VBQzdCLENBQUMsQ0FBQztFQUVGSSxRQUFRLENBQUMsWUFBWTtJQUNqQixNQUFNSCxtQkFBbUIsQ0FBQyxDQUFDO0VBQy9CLENBQUMsQ0FBQztFQUVGQyxRQUFRLENBQUMsNEJBQTRCLEVBQUUsTUFBTTtJQUN6Q0csRUFBRSxDQUFDLGdDQUFnQyxFQUFFLFlBQVk7TUFDN0MsTUFBTUMsUUFBUSxHQUFHLE1BQU1ULE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQzlCUSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQ2RDLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFaEJBLE1BQU0sQ0FBQ0YsUUFBUSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsT0FBTyxDQUFDO1FBQzFCQyxNQUFNLEVBQUUsU0FBUztRQUNqQkMsT0FBTyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDO0lBRUZQLEVBQUUsQ0FBQywwQkFBMEIsRUFBRSxZQUFZO01BQ3ZDLE1BQU1DLFFBQVEsR0FBRyxNQUFNVCxPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUM5QlEsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQzFCQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWhCQSxNQUFNLENBQUNGLFFBQVEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLE9BQU8sQ0FBQztRQUMxQkMsTUFBTSxFQUFFLE1BQU07UUFDZEMsT0FBTyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDO0VBQ04sQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119