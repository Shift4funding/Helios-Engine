{"version":3,"names":["PerplexityService","require","RedisService","crypto","natural","Transaction","moment","logger","TransactionAnalysisService","constructor","perplexityService","redisService","classifier","BayesClassifier","initializeClassifier","getInstance","instance","addDocument","train","analyzeStatementData","transactions","analysisId","generateAnalysisId","cachedAnalysis","get","basicAnalysis","summary","generateSummary","categories","categorizeTransactions","trends","analyzeTrends","metadata","timestamp","Date","toISOString","transactionCount","length","aiAnalysis","analyzeTransactions","fullAnalysis","aiInsights","set","error","Error","message","startDate","endDate","find","date","$gte","$lte","sort","totalIncome","totalExpenses","netCashFlow","categoryBreakdown","monthlyAnalysis","forEach","transaction","amount","month","slice","category","Math","abs","income","expenses","global","__mocks__","calculatePerformanceMetrics","start","process","hrtime","count","countDocuments","seconds","heapUsed","memoryUsage","processingTime","transactionsProcessed","mockLogger","console","data","map","t","join","createHash","update","digest","filter","reduce","sum","averageTransaction","shopping","utilities","dining","travel","healthcare","other","categoryRules","categorized","push","patterns","Object","entries","some","pattern","test","description","toLowerCase","_","s","enhancedCategorization","merchantCategories","subscriptions","merchants","groceries","transportation","rules","merchant","toUpperCase","includes","classify","sortedTransactions","a","b","monthly","groupByPeriod","weekly","dailyAverages","calculateDailyAverages","spendingPatterns","analyzeSpendingPatterns","period","groups","key","format","total","saveAnalysis","analysis","all","insertMany","dailyGroups","Map","daysOfWeek","day","dayOfWeek","group","Array","from","result","averageIncome","averageExpense","frequentMerchants","unusualActivity","recurringPatterns","savings","investments","debtRepayment","Promise","resolve","analyzeFrequentMerchants","detectUnusualActivity","findRecurringTransactions","analyzeCategoryBreakdown","breakdown","highValueThreshold","highValueTransactions","remainingTransactions","incomeTransactions","expenseTransactions","incomeOutliers","processOutliers","expenseOutliers","stdDevMultiplier","amounts","mean","amt","variance","pow","stdDev","sqrt","relativeThreshold","absoluteThreshold","findOutliers","q1Index","floor","q3Index","q1","q3","iqr","upperBound","lowerBound","normalizeTransactionKey","has","dates","values","frequency","detectFrequency","confidence","calculateConfidence","roundedAmount","round","normalizedDesc","replace","validateTransaction","toDate","trim","Number","toFixed","merchantStats","totalAmount","stats","averageAmount","calculateIntervals","sortedDates","valueOf","intervals","i","diff","avgInterval","calculateAverageInterval","calculateVariance","varianceThreshold","interval","scores","consistency","max","min","coverage","calculateTimeSpanScore","recency","calculateRecencyScore","confidenceScore","score","lastConfidenceCalculation","finalScore","monthsSpan","mostRecent","monthsSinceLatest","calculateBusinessMetrics","metrics","cashFlow","calculateCashFlow","riskIndicators","detectRiskFactors","operatingStats","calculateOperatingStats","cashReserves","analyzeCashReserves","overview","healthScore","calculateBusinessHealthScore","recommendations","generateRecommendations","identifyTrends","monthlyAverages","m","keys","stability","calculateStabilityScore","identifyCashFlowTrends","risks","nsf","largePurchases","lowBalanceEvents","detectLowBalanceEvents","irregularPayroll","findIrregularPayroll","riskScore","calculateRiskScore","warnings","generateRiskWarnings","operatingExpenses","averageDailyBalance","calculateRunningBalance","operatingExpenseRatio","daysReceivable","calculateDaysReceivable","daysPayable","calculateDaysPayable","monthlyExpenses","averageMonthlyExpense","currentBalance","calculateCurrentBalance","monthsOfRunway","reserveHealth","assessReserveHealth","generateReserveRecommendations","weights","lowBalance","type","priority","actions","cashFlowScore","scoreCashFlow","reserveScore","scoreCashReserves","operatingScore","scoreOperatingStats","analyzeCashFlowTrend","riskLevel","analyzeRiskTrend","operatingEfficiency","analyzeOperatingTrend","overallHealth","analyzeHealthTrend","module","exports"],"sources":["transactionAnalysisService.js"],"sourcesContent":["const PerplexityService = require('./perplexityService');\r\nconst RedisService = require('./RedisService');\r\nconst crypto = require('crypto');\r\nconst natural = require('natural');\r\nconst Transaction = require('../models/Transaction');\r\nconst moment = require('moment');\r\nconst logger = require('../config/logger');\r\n\r\nclass TransactionAnalysisService {\r\n    constructor() {\r\n        this.perplexityService = new PerplexityService();\r\n        this.redisService = RedisService;\r\n        this.classifier = new natural.BayesClassifier();\r\n        this.initializeClassifier();\r\n    }\r\n\r\n    // Static method for singleton instance\r\n    static getInstance() {\r\n        if (!TransactionAnalysisService.instance) {\r\n            TransactionAnalysisService.instance = new TransactionAnalysisService();\r\n        }\r\n        return TransactionAnalysisService.instance;\r\n    }\r\n\r\n    async initializeClassifier() {\r\n        // Train classifier with common transaction patterns\r\n        this.classifier.addDocument('salary deposit payroll', 'income');\r\n        this.classifier.addDocument('grocery food market', 'shopping');\r\n        this.classifier.addDocument('restaurant cafe dining', 'dining');\r\n        this.classifier.train();\r\n    }\r\n\r\n    async analyzeStatementData(transactions) {\r\n        try {\r\n            // Generate consistent analysis ID\r\n            const analysisId = this.generateAnalysisId(transactions);\r\n            \r\n            // Check cache first\r\n            const cachedAnalysis = await this.redisService.get(`analysis:${analysisId}`);\r\n            if (cachedAnalysis) {\r\n                return cachedAnalysis;\r\n            }\r\n\r\n            // Perform new analysis if no cache\r\n            const basicAnalysis = {\r\n                summary: this.generateSummary(transactions),\r\n                categories: this.categorizeTransactions(transactions),\r\n                trends: this.analyzeTrends(transactions),\r\n                metadata: {\r\n                    analysisId,\r\n                    timestamp: new Date().toISOString(),\r\n                    transactionCount: transactions.length\r\n                }\r\n            };\r\n\r\n            // Get AI insights\r\n            const aiAnalysis = await this.perplexityService.analyzeTransactions(transactions);\r\n            const fullAnalysis = { ...basicAnalysis, aiInsights: aiAnalysis };\r\n\r\n            // Cache the results\r\n            await this.redisService.set(`analysis:${analysisId}`, fullAnalysis, 3600);\r\n            return fullAnalysis;\r\n        } catch (error) {\r\n            throw new Error(`Analysis failed: ${error.message}`);\r\n        }\r\n    }\r\n\r\n    async analyzeTransactions(startDate, endDate) {\r\n        try {\r\n            if (startDate > endDate) {\r\n                throw new Error('Invalid date range');\r\n            }\r\n\r\n            const transactions = await Transaction.find({\r\n                date: { $gte: startDate, $lte: endDate }\r\n            }).sort({ date: 1 });\r\n\r\n            const summary = {\r\n                totalIncome: 0,\r\n                totalExpenses: 0,\r\n                netCashFlow: 0,\r\n                categoryBreakdown: {},\r\n                monthlyAnalysis: {}\r\n            };\r\n\r\n            transactions.forEach(transaction => {\r\n                const amount = transaction.amount;\r\n                const month = transaction.date.toISOString().slice(0, 7); // YYYY-MM\r\n\r\n                // Update totals\r\n                if (transaction.category === 'income') {\r\n                    summary.totalIncome += amount;\r\n                } else if (transaction.category === 'expense') {\r\n                    summary.totalExpenses += Math.abs(amount);\r\n                }\r\n\r\n                // Category breakdown\r\n                if (!summary.categoryBreakdown[transaction.category]) {\r\n                    summary.categoryBreakdown[transaction.category] = 0;\r\n                }\r\n                summary.categoryBreakdown[transaction.category] += Math.abs(amount);\r\n\r\n                // Monthly analysis\r\n                if (!summary.monthlyAnalysis[month]) {\r\n                    summary.monthlyAnalysis[month] = {\r\n                        income: 0,\r\n                        expenses: 0,\r\n                        netCashFlow: 0\r\n                    };\r\n                }\r\n                \r\n                if (transaction.category === 'income') {\r\n                    summary.monthlyAnalysis[month].income += amount;\r\n                } else if (transaction.category === 'expense') {\r\n                    summary.monthlyAnalysis[month].expenses += Math.abs(amount);\r\n                }\r\n                \r\n                summary.monthlyAnalysis[month].netCashFlow = \r\n                    summary.monthlyAnalysis[month].income - \r\n                    summary.monthlyAnalysis[month].expenses;\r\n            });\r\n\r\n            summary.netCashFlow = summary.totalIncome - summary.totalExpenses;\r\n\r\n            return summary;\r\n        } catch (error) {\r\n            if (error.message === 'Invalid date range') {\r\n                throw error;\r\n            }\r\n            global.__mocks__.logger.error('Analysis failed:', error);\r\n            throw new Error('Failed to analyze transactions');\r\n        }\r\n    }\r\n\r\n    async calculatePerformanceMetrics() {\r\n        const start = process.hrtime();\r\n        \r\n        try {\r\n            // Ensure we have a valid database connection\r\n            const count = await Transaction.countDocuments();\r\n            \r\n            // Calculate elapsed time\r\n            const [seconds] = process.hrtime(start);\r\n\r\n            // Get current memory usage\r\n            const { heapUsed } = process.memoryUsage();\r\n\r\n            return {\r\n                processingTime: seconds,\r\n                memoryUsage: heapUsed,\r\n                transactionsProcessed: count\r\n            };\r\n        } catch (error) {\r\n            const mockLogger = global.__mocks__?.logger || console;\r\n            mockLogger.error('Failed to calculate performance metrics:', error);\r\n            throw new Error('Failed to calculate performance metrics');\r\n        }\r\n    }\r\n\r\n    generateAnalysisId(transactions) {\r\n        const data = transactions.map(t => `${t.date}${t.amount}`).join('');\r\n        return crypto.createHash('md5').update(data).digest('hex');\r\n    }\r\n\r\n    generateSummary(transactions) {\r\n        return {\r\n            totalIncome: transactions.filter(t => t.amount > 0)\r\n                .reduce((sum, t) => sum + t.amount, 0),\r\n            totalExpenses: Math.abs(transactions.filter(t => t.amount < 0)\r\n                .reduce((sum, t) => sum + t.amount, 0)),\r\n            netCashFlow: transactions.reduce((sum, t) => sum + t.amount, 0),\r\n            averageTransaction: transactions.reduce((sum, t) => \r\n                sum + Math.abs(t.amount), 0) / transactions.length\r\n        };\r\n    }\r\n\r\n    categorizeTransactions(transactions) {\r\n        const categories = {\r\n            income: [],\r\n            expenses: {\r\n                shopping: [],\r\n                utilities: [],\r\n                dining: [],\r\n                travel: [],\r\n                healthcare: [],\r\n                other: []\r\n            },\r\n            summary: {}\r\n        };\r\n\r\n        const categoryRules = {\r\n            income: [/salary|deposit|payment received/i],\r\n            shopping: [/amazon|walmart|target|store|market/i],\r\n            utilities: [/electric|water|gas|internet|phone|utility/i],\r\n            dining: [/restaurant|cafe|coffee|food|grubhub|doordash/i],\r\n            travel: [/airline|hotel|airbnb|uber|lyft|taxi/i],\r\n            healthcare: [/doctor|pharmacy|medical|healthcare|hospital/i]\r\n        };\r\n\r\n        transactions.forEach(transaction => {\r\n            let categorized = false;\r\n            \r\n            if (transaction.amount > 0) {\r\n                categories.income.push(transaction);\r\n                categorized = true;\r\n            } else {\r\n                for (const [category, patterns] of Object.entries(categoryRules)) {\r\n                    if (patterns.some(pattern => pattern.test(transaction.description.toLowerCase()))) {\r\n                        categories.expenses[category].push(transaction);\r\n                        categorized = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!categorized && transaction.amount < 0) {\r\n                categories.expenses.other.push(transaction);\r\n            }\r\n        });\r\n\r\n        // Calculate summary\r\n        categories.summary = {\r\n            totalIncome: categories.income.reduce((sum, t) => sum + t.amount, 0),\r\n            totalExpenses: Object.entries(categories.expenses).reduce((sum, [_, transactions]) => \r\n                sum + Math.abs(transactions.reduce((s, t) => s + t.amount, 0)), 0)\r\n        };\r\n\r\n        return categories;\r\n    }\r\n\r\n    enhancedCategorization(transaction) {\r\n        // Merchant category mapping\r\n        const merchantCategories = {\r\n            subscriptions: {\r\n                patterns: [/netflix|spotify|hulu|disney\\+|amazon prime|subscription/i],\r\n                merchants: ['NETFLIX', 'SPOTIFY', 'HULU', 'DISNEY+']\r\n            },\r\n            utilities: {\r\n                patterns: [/electric|water|gas|internet|phone|utility/i],\r\n                merchants: ['AT&T', 'VERIZON', 'COMCAST', 'PG&E']\r\n            },\r\n            groceries: {\r\n                patterns: [/grocery|market|food|supermarket/i],\r\n                merchants: ['WALMART', 'KROGER', 'SAFEWAY', 'WHOLE FOODS']\r\n            },\r\n            transportation: {\r\n                patterns: [/gas|fuel|uber|lyft|taxi|parking|transit/i],\r\n                merchants: ['SHELL', 'CHEVRON', 'UBER', 'LYFT']\r\n            },\r\n            dining: {\r\n                patterns: [/restaurant|cafe|coffee|food|grubhub|doordash/i],\r\n                merchants: ['STARBUCKS', 'MCDONALDS', 'CHIPOTLE']\r\n            }\r\n        };\r\n\r\n        // First try exact merchant match\r\n        for (const [category, rules] of Object.entries(merchantCategories)) {\r\n            if (rules.merchants.some(merchant => \r\n                transaction.description.toUpperCase().includes(merchant))) {\r\n                return category;\r\n            }\r\n        }\r\n\r\n        // Then try pattern matching\r\n        for (const [category, rules] of Object.entries(merchantCategories)) {\r\n            if (rules.patterns.some(pattern => pattern.test(transaction.description))) {\r\n                return category;\r\n            }\r\n        }\r\n\r\n        // Use ML classifier as fallback\r\n        return this.classifier.classify(transaction.description.toLowerCase());\r\n    }\r\n\r\n    analyzeTrends(transactions) {\r\n        const sortedTransactions = [...transactions].sort((a, b) => \r\n            new Date(a.date) - new Date(b.date));\r\n\r\n        return {\r\n            monthly: this.groupByPeriod(sortedTransactions, 'month'),\r\n            weekly: this.groupByPeriod(sortedTransactions, 'week'),\r\n            dailyAverages: this.calculateDailyAverages(sortedTransactions),\r\n            spendingPatterns: this.analyzeSpendingPatterns(sortedTransactions)\r\n        };\r\n    }\r\n\r\n    groupByPeriod(transactions, period) {\r\n        return transactions.reduce((groups, transaction) => {\r\n            const date = moment(transaction.date);\r\n            const key = period === 'month' ? \r\n                date.format('YYYY-MM') : \r\n                date.format('YYYY-[W]WW');\r\n\r\n            if (!groups[key]) {\r\n                groups[key] = {\r\n                    total: 0,\r\n                    count: 0,\r\n                    income: 0,\r\n                    expenses: 0\r\n                };\r\n            }\r\n\r\n            groups[key].count++;\r\n            groups[key].total += transaction.amount;\r\n            \r\n            if (transaction.amount > 0) {\r\n                groups[key].income += transaction.amount;\r\n            } else {\r\n                groups[key].expenses += Math.abs(transaction.amount);\r\n            }\r\n\r\n            return groups;\r\n        }, {});\r\n    }\r\n\r\n    async saveAnalysis(analysis) {\r\n        const transactions = analysis.categories.all.map(transaction => \r\n            new Transaction({\r\n                ...transaction,\r\n                analysisId: analysis.analysisId\r\n            })\r\n        );\r\n\r\n        await Transaction.insertMany(transactions);\r\n    }\r\n\r\n    calculateDailyAverages(transactions) {\r\n        if (!transactions || transactions.length === 0) {\r\n            return {};\r\n        }\r\n\r\n        const dailyGroups = new Map();\r\n        const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n\r\n        // Initialize groups\r\n        daysOfWeek.forEach(day => {\r\n            dailyGroups.set(day, {\r\n                income: [],\r\n                expenses: []\r\n            });\r\n        });\r\n\r\n        // Group transactions by day\r\n        transactions.forEach(transaction => {\r\n            const date = moment(transaction.date);\r\n            const dayOfWeek = daysOfWeek[date.day()];\r\n            const group = dailyGroups.get(dayOfWeek);\r\n            \r\n            if (transaction.amount > 0) {\r\n                group.income.push(transaction.amount);\r\n            } else {\r\n                group.expenses.push(Math.abs(transaction.amount));\r\n            }\r\n        });\r\n\r\n        // Calculate averages\r\n        return Array.from(dailyGroups.entries()).reduce((result, [day, data]) => {\r\n            result[day] = {\r\n                averageIncome: data.income.length ? \r\n                    data.income.reduce((sum, amount) => sum + amount, 0) / data.income.length : 0,\r\n                averageExpense: data.expenses.length ?\r\n                    data.expenses.reduce((sum, amount) => sum + amount, 0) / data.expenses.length : 0,\r\n                transactionCount: data.income.length + data.expenses.length\r\n            };\r\n            return result;\r\n        }, {});\r\n    }\r\n\r\n    async analyzeSpendingPatterns(transactions) {\r\n        if (!transactions?.length) {\r\n            return {\r\n                frequentMerchants: [],\r\n                unusualActivity: [],\r\n                recurringPatterns: [],\r\n                dailyAverages: {},\r\n                categoryBreakdown: {\r\n                    income: 0,\r\n                    expenses: 0,\r\n                    savings: 0,\r\n                    investments: 0,\r\n                    debtRepayment: 0,\r\n                    other: 0\r\n                }\r\n            };\r\n        }\r\n\r\n        // Use Promise.all to handle async operations concurrently\r\n        const [\r\n            frequentMerchants,\r\n            unusualActivity,\r\n            recurringPatterns,\r\n            dailyAverages,\r\n            categoryBreakdown\r\n        ] = await Promise.all([\r\n            Promise.resolve(this.analyzeFrequentMerchants(transactions)),\r\n            Promise.resolve(this.detectUnusualActivity(transactions)),\r\n            this.findRecurringTransactions(transactions),\r\n            Promise.resolve(this.calculateDailyAverages(transactions)),\r\n            Promise.resolve(this.analyzeCategoryBreakdown(transactions))\r\n        ]);\r\n\r\n        return {\r\n            frequentMerchants,\r\n            unusualActivity,\r\n            recurringPatterns,\r\n            dailyAverages,\r\n            categoryBreakdown\r\n        };\r\n    }\r\n\r\n    analyzeCategoryBreakdown(transactions) {\r\n        if (!transactions?.length) {\r\n            return {\r\n                income: 0,\r\n                expenses: 0,\r\n                savings: 0,\r\n                investments: 0,\r\n                debtRepayment: 0,\r\n                other: 0\r\n            };\r\n        }\r\n\r\n        const breakdown = {\r\n            income: 0,\r\n            expenses: 0,\r\n            savings: 0,\r\n            investments: 0,\r\n            debtRepayment: 0,\r\n            other: 0\r\n        };\r\n\r\n        transactions.forEach(transaction => {\r\n            const amount = Math.abs(transaction.amount);\r\n            if (transaction.amount > 0) {\r\n                breakdown.income += amount;\r\n            } else {\r\n                // Categorize expenses based on description\r\n                if (/savings|deposit/i.test(transaction.description)) {\r\n                    breakdown.savings += amount;\r\n                } else if (/investment|stock|bond/i.test(transaction.description)) {\r\n                    breakdown.investments += amount;\r\n                } else if (/loan|mortgage|debt/i.test(transaction.description)) {\r\n                    breakdown.debtRepayment += amount;\r\n                } else {\r\n                    breakdown.expenses += amount;\r\n                }\r\n            }\r\n        });\r\n\r\n        return breakdown;\r\n    }\r\n\r\n    detectUnusualActivity(transactions) {\r\n        if (!transactions?.length) return [];\r\n\r\n        // Always consider transactions >= $5000 as unusual\r\n        const highValueThreshold = 5000;\r\n        const highValueTransactions = transactions.filter(t => \r\n            Math.abs(t.amount) >= highValueThreshold\r\n        );\r\n\r\n        // Separate remaining transactions\r\n        const remainingTransactions = transactions.filter(t => \r\n            Math.abs(t.amount) < highValueThreshold\r\n        );\r\n\r\n        // Process regular transactions\r\n        const incomeTransactions = remainingTransactions.filter(t => t.amount > 0);\r\n        const expenseTransactions = remainingTransactions.filter(t => t.amount < 0);\r\n\r\n        // Find statistical outliers\r\n        const incomeOutliers = this.processOutliers(incomeTransactions, 1.5);\r\n        const expenseOutliers = this.processOutliers(expenseTransactions, 2);\r\n\r\n        // Combine all unusual transactions\r\n        return [...highValueTransactions, ...incomeOutliers, ...expenseOutliers]\r\n            .sort((a, b) => Math.abs(b.amount) - Math.abs(a.amount));\r\n    }\r\n\r\n    processOutliers(transactions, stdDevMultiplier) {\r\n        if (transactions.length < 2) return transactions;\r\n\r\n        const amounts = transactions.map(t => Math.abs(t.amount));\r\n        \r\n        // Calculate statistics\r\n        const mean = amounts.reduce((sum, amt) => sum + amt, 0) / amounts.length;\r\n        const variance = amounts.reduce((sum, amt) => \r\n            sum + Math.pow(amt - mean, 2), 0) / amounts.length;\r\n        const stdDev = Math.sqrt(variance);\r\n\r\n        // Use both absolute and relative thresholds\r\n        const relativeThreshold = mean + (stdDevMultiplier * stdDev);\r\n        const absoluteThreshold = mean * 2; // Transactions 2x the mean\r\n\r\n        return transactions.filter(t => {\r\n            const amount = Math.abs(t.amount);\r\n            return amount > relativeThreshold || amount > absoluteThreshold;\r\n        });\r\n    }\r\n\r\n    findOutliers(transactions) {\r\n        if (transactions.length < 2) return [];\r\n\r\n        const amounts = transactions.map(t => Math.abs(t.amount)).sort((a, b) => a - b);\r\n        const q1Index = Math.floor(amounts.length * 0.25);\r\n        const q3Index = Math.floor(amounts.length * 0.75);\r\n        \r\n        const q1 = amounts[q1Index];\r\n        const q3 = amounts[q3Index];\r\n        const iqr = q3 - q1;\r\n        const upperBound = q3 + (1.5 * iqr);\r\n        const lowerBound = q1 - (1.5 * iqr);\r\n\r\n        return transactions.filter(t => {\r\n            const amount = Math.abs(t.amount);\r\n            return amount > upperBound || amount < lowerBound;\r\n        });\r\n    }\r\n\r\n    async findRecurringTransactions(transactions) {\r\n        if (!transactions?.length) return [];\r\n\r\n        const patterns = new Map();\r\n        \r\n        transactions.forEach(transaction => {\r\n            const key = this.normalizeTransactionKey(transaction);\r\n            if (!patterns.has(key)) {\r\n                patterns.set(key, {\r\n                    description: transaction.description,\r\n                    amount: transaction.amount,\r\n                    dates: []\r\n                });\r\n            }\r\n            patterns.get(key).dates.push(moment(transaction.date));\r\n        });\r\n\r\n        const recurringPatterns = Array.from(patterns.values())\r\n        .filter(pattern => pattern.dates.length >= 2)\r\n        .map(pattern => ({\r\n            ...pattern,\r\n            frequency: this.detectFrequency(pattern.dates),\r\n            confidence: this.calculateConfidence(pattern.dates)\r\n        }))\r\n        .filter(pattern => pattern.frequency !== 'irregular');\r\n\r\n        return recurringPatterns;\r\n    }\r\n\r\n    normalizeTransactionKey(transaction) {\r\n        // Normalize amount to handle small variations\r\n        const roundedAmount = Math.round(Math.abs(transaction.amount) * 100) / 100;\r\n        // Normalize description to handle common variations\r\n        const normalizedDesc = transaction.description\r\n            .toUpperCase()\r\n            .replace(/[^A-Z0-9]/g, '');\r\n        return `${normalizedDesc}_${roundedAmount}`;\r\n    }\r\n\r\n    /**\r\n     * Validates and normalizes a transaction\r\n     * @param {Object} transaction - Transaction to validate\r\n     * @throws {Error} If transaction is invalid\r\n     */\r\n    validateTransaction(transaction) {\r\n        if (!transaction?.date || !transaction?.description || typeof transaction?.amount !== 'number') {\r\n            throw new Error('Invalid transaction format');\r\n        }\r\n\r\n        return {\r\n            date: moment(transaction.date).toDate(),\r\n            description: transaction.description.trim(),\r\n            amount: Number(transaction.amount.toFixed(2)),\r\n            category: transaction.category || this.enhancedCategorization(transaction)\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Analyzes merchant frequency with amount consideration\r\n     */\r\n    analyzeFrequentMerchants(transactions) {\r\n        if (!transactions?.length) return [];\r\n\r\n        const merchantStats = new Map();\r\n        \r\n        transactions.forEach(transaction => {\r\n            const key = transaction.description.toUpperCase().trim();\r\n            if (!merchantStats.has(key)) {\r\n                merchantStats.set(key, {\r\n                    merchant: transaction.description,\r\n                    count: 0,\r\n                    totalAmount: 0\r\n                });\r\n            }\r\n            \r\n            const stats = merchantStats.get(key);\r\n            stats.count++;\r\n            stats.totalAmount += Math.abs(transaction.amount);\r\n        });\r\n\r\n        return Array.from(merchantStats.values())\r\n            .map(({ merchant, count, totalAmount }) => ({\r\n                merchant,\r\n                count,\r\n                averageAmount: totalAmount / count\r\n            }))\r\n            .sort((a, b) => b.count - a.count)\r\n            .slice(0, 10);\r\n    }\r\n\r\n    calculateIntervals(dates) {\r\n        if (!dates?.length) return [];\r\n        \r\n        const sortedDates = [...dates].sort((a, b) => a.valueOf() - b.valueOf());\r\n        const intervals = [];\r\n        \r\n        for (let i = 1; i < sortedDates.length; i++) {\r\n            intervals.push(sortedDates[i].diff(sortedDates[i-1], 'days'));\r\n        }\r\n        \r\n        return intervals;\r\n    }\r\n\r\n    detectFrequency(dates) {\r\n        if (!dates || dates.length < 2) return 'irregular';\r\n\r\n        const intervals = this.calculateIntervals(dates);\r\n        const avgInterval = this.calculateAverageInterval(intervals);\r\n        const variance = this.calculateVariance(intervals);\r\n\r\n        // Allow 20% variance for regular patterns\r\n        const varianceThreshold = avgInterval * 0.2;\r\n\r\n        if (variance <= varianceThreshold) {\r\n            // Detect common patterns based on average interval\r\n            if (avgInterval >= 28 && avgInterval <= 31) return 'monthly';\r\n            if (avgInterval >= 13 && avgInterval <= 15) return 'bi-weekly';\r\n            if (avgInterval >= 6 && avgInterval <= 8) return 'weekly';\r\n        }\r\n\r\n        return 'irregular';\r\n    }\r\n\r\n    calculateAverageInterval(intervals) {\r\n        if (!intervals || intervals.length === 0) return 0;\r\n        return intervals.reduce((sum, interval) => sum + interval, 0) / intervals.length;\r\n    }\r\n\r\n    calculateVariance(intervals) {\r\n        if (!intervals || intervals.length === 0) return 0;\r\n        \r\n        const mean = this.calculateAverageInterval(intervals);\r\n        return intervals.reduce((sum, interval) => {\r\n            return sum + Math.pow(interval - mean, 2);\r\n        }, 0) / intervals.length;\r\n    }\r\n\r\n    /**\r\n     * Calculates confidence score for recurring patterns\r\n     * @param {Array<moment>} dates - Array of transaction dates\r\n     * @returns {number} Confidence score between 0-100\r\n     */\r\n    calculateConfidence(dates) {\r\n        if (!dates || dates.length < 2) return 0;\r\n\r\n        const intervals = this.calculateIntervals(dates);\r\n        const avgInterval = this.calculateAverageInterval(intervals);\r\n        const variance = this.calculateVariance(intervals);\r\n\r\n        // Calculate confidence components\r\n        const scores = {\r\n            // Interval consistency (40%) - Lower variance means higher confidence\r\n            consistency: Math.max(0, 40 * (1 - (variance / avgInterval))),\r\n            // Sample size (30%) - More occurrences increase confidence\r\n            frequency: Math.min(30, dates.length * 7.5),\r\n            // Time span coverage (20%) - Longer history increases confidence\r\n            coverage: Math.min(20, this.calculateTimeSpanScore(dates)),\r\n            // Recent activity (10%) - More recent transactions increase confidence\r\n            recency: this.calculateRecencyScore(dates)\r\n        };\r\n\r\n        // Calculate final confidence score\r\n        const confidenceScore = Object.values(scores).reduce((sum, score) => sum + score, 0);\r\n\r\n        // Store debug info if needed\r\n        this.lastConfidenceCalculation = {\r\n            scores,\r\n            intervals,\r\n            avgInterval,\r\n            variance,\r\n            finalScore: Math.round(confidenceScore)\r\n        };\r\n\r\n        return Math.round(confidenceScore);\r\n    }\r\n\r\n    /**\r\n     * Calculate score based on time span of transactions\r\n     * @private\r\n     */\r\n    calculateTimeSpanScore(dates) {\r\n        const sortedDates = [...dates].sort((a, b) => a.valueOf() - b.valueOf());\r\n        const monthsSpan = sortedDates[sortedDates.length - 1]\r\n            .diff(sortedDates[0], 'months', true);\r\n        return Math.min(20, monthsSpan * 5); // 4 points per month up to 20\r\n    }\r\n\r\n    /**\r\n     * Calculate score based on recency of transactions\r\n     * @private\r\n     */\r\n    calculateRecencyScore(dates) {\r\n        const mostRecent = moment.max(dates);\r\n        const monthsSinceLatest = moment().diff(mostRecent, 'months', true);\r\n        return Math.max(0, 10 * (1 - (monthsSinceLatest / 6))); // Decay over 6 months\r\n    }\r\n\r\n    // Add these business-specific metrics after calculateVariance method\r\n    calculateBusinessMetrics(transactions) {\r\n        const metrics = {\r\n            cashFlow: this.calculateCashFlow(transactions),\r\n            riskIndicators: this.detectRiskFactors(transactions),\r\n            operatingStats: this.calculateOperatingStats(transactions),\r\n            cashReserves: this.analyzeCashReserves(transactions)\r\n        };\r\n\r\n        return {\r\n            ...metrics,\r\n            overview: {\r\n                healthScore: this.calculateBusinessHealthScore(metrics),\r\n                recommendations: this.generateRecommendations(metrics),\r\n                trends: this.identifyTrends(metrics)\r\n            }\r\n        };\r\n    }\r\n\r\n    calculateCashFlow(transactions) {\r\n        const monthly = this.groupByPeriod(transactions, 'month');\r\n        \r\n        return {\r\n            monthlyAverages: {\r\n                income: Object.values(monthly).reduce((sum, m) => sum + m.income, 0) / Object.keys(monthly).length,\r\n                expenses: Object.values(monthly).reduce((sum, m) => sum + m.expenses, 0) / Object.keys(monthly).length\r\n            },\r\n            stability: this.calculateStabilityScore(monthly),\r\n            trends: this.identifyCashFlowTrends(monthly)\r\n        };\r\n    }\r\n\r\n    detectRiskFactors(transactions) {\r\n        const risks = {\r\n            nsf: transactions.filter(t => /NSF|RETURNED|OVERDRAFT/i.test(t.description)),\r\n            largePurchases: transactions.filter(t => Math.abs(t.amount) > 5000),\r\n            lowBalanceEvents: this.detectLowBalanceEvents(transactions),\r\n            irregularPayroll: this.findIrregularPayroll(transactions)\r\n        };\r\n\r\n        return {\r\n            ...risks,\r\n            riskScore: this.calculateRiskScore(risks),\r\n            warnings: this.generateRiskWarnings(risks)\r\n        };\r\n    }\r\n\r\n    calculateOperatingStats(transactions) {\r\n        const operatingExpenses = transactions.filter(t => \r\n            t.amount < 0 && !/TRANSFER|WITHDRAWAL|DEPOSIT/i.test(t.description)\r\n        );\r\n\r\n        return {\r\n            averageDailyBalance: this.calculateRunningBalance(transactions),\r\n            operatingExpenseRatio: Math.abs(operatingExpenses.reduce((sum, t) => sum + t.amount, 0)) / \r\n                transactions.filter(t => t.amount > 0).reduce((sum, t) => sum + t.amount, 0),\r\n            daysReceivable: this.calculateDaysReceivable(transactions),\r\n            daysPayable: this.calculateDaysPayable(transactions)\r\n        };\r\n    }\r\n\r\n    analyzeCashReserves(transactions) {\r\n        const monthlyExpenses = this.groupByPeriod(\r\n            transactions.filter(t => t.amount < 0), \r\n            'month'\r\n        );\r\n        const averageMonthlyExpense = Object.values(monthlyExpenses)\r\n            .reduce((sum, m) => sum + m.expenses, 0) / Object.keys(monthlyExpenses).length;\r\n        \r\n        const currentBalance = this.calculateCurrentBalance(transactions);\r\n        \r\n        return {\r\n            monthsOfRunway: currentBalance / averageMonthlyExpense,\r\n            reserveHealth: this.assessReserveHealth(currentBalance, averageMonthlyExpense),\r\n            recommendations: this.generateReserveRecommendations(currentBalance, averageMonthlyExpense)\r\n        };\r\n    }\r\n\r\n    calculateRiskScore(risks) {\r\n        const weights = {\r\n            nsf: 30,\r\n            lowBalance: 25,\r\n            irregularPayroll: 25,\r\n            largePurchases: 20\r\n        };\r\n\r\n        let score = 100;\r\n        \r\n        if (risks.nsf.length > 0) score -= weights.nsf;\r\n        if (risks.lowBalanceEvents.length > 0) score -= weights.lowBalance;\r\n        if (risks.irregularPayroll) score -= weights.irregularPayroll;\r\n        if (risks.largePurchases.length > 2) score -= weights.largePurchases;\r\n\r\n        return Math.max(0, score);\r\n    }\r\n\r\n    generateRecommendations(metrics) {\r\n        const recommendations = [];\r\n\r\n        if (metrics.cashFlow.stability < 0.7) {\r\n            recommendations.push({\r\n                type: 'cash_flow',\r\n                priority: 'high',\r\n                message: 'Consider implementing stronger cash flow management strategies',\r\n                actions: ['Review pricing strategy', 'Optimize inventory levels', 'Improve collections process']\r\n            });\r\n        }\r\n\r\n        if (metrics.operatingStats.operatingExpenseRatio > 0.85) {\r\n            recommendations.push({\r\n                type: 'expenses',\r\n                priority: 'medium',\r\n                message: 'Operating expenses are high relative to revenue',\r\n                actions: ['Review major expense categories', 'Identify potential cost savings']\r\n            });\r\n        }\r\n\r\n        return recommendations;\r\n    }\r\n\r\n    calculateBusinessHealthScore(metrics) {\r\n        const scores = {\r\n            cashFlowScore: this.scoreCashFlow(metrics.cashFlow),\r\n            riskScore: metrics.riskIndicators.riskScore,\r\n            reserveScore: this.scoreCashReserves(metrics.cashReserves),\r\n            operatingScore: this.scoreOperatingStats(metrics.operatingStats)\r\n        };\r\n\r\n        // Weighted average of scores\r\n        const weights = { cashFlowScore: 0.4, riskScore: 0.3, reserveScore: 0.2, operatingScore: 0.1 };\r\n        return Object.entries(scores).reduce((total, [key, score]) => \r\n            total + (score * weights[key]), 0);\r\n    }\r\n\r\n    identifyTrends(metrics) {\r\n        return {\r\n            cashFlow: this.analyzeCashFlowTrend(metrics.cashFlow),\r\n            riskLevel: this.analyzeRiskTrend(metrics.riskIndicators),\r\n            operatingEfficiency: this.analyzeOperatingTrend(metrics.operatingStats),\r\n            overallHealth: this.analyzeHealthTrend(metrics)\r\n        };\r\n    }\r\n}\r\n\r\nmodule.exports = TransactionAnalysisService;"],"mappings":"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","ignoreList":[]}