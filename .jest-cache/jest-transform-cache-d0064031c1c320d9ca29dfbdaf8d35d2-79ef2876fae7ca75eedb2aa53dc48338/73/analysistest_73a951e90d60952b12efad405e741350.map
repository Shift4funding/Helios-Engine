{"version":3,"names":["require","config","path","request","app","describe","TEST_PDF_PATH","join","__dirname","beforeAll","writeFileSync","Buffer","from","it","response","get","expect","status","toBe","body","toHaveProperty","post","attach","data"],"sources":["analysis.test.js"],"sourcesContent":["require('dotenv').config({ path: '.env.test' });\r\nconst request = require('supertest');\r\nconst path = require('path');\r\nconst app = require('../testApp');\r\n\r\ndescribe('Analysis API Integration', () => {\r\n    const TEST_PDF_PATH = path.join(__dirname, '../fixtures/sample-statement.pdf');\r\n    \r\n    beforeAll(() => {\r\n        // Create test PDF if it doesn't exist\r\n        require('fs').writeFileSync(\r\n            TEST_PDF_PATH,\r\n            Buffer.from('Mock PDF content')\r\n        );\r\n    });\r\n\r\n    describe('Basic API Tests', () => {\r\n        it('should return 200 on health check', async () => {\r\n            const response = await request(app).get('/health');\r\n            expect(response.status).toBe(200);\r\n            expect(response.body).toHaveProperty('status', 'ok');\r\n        });\r\n    });\r\n\r\n    describe('POST /api/analysis/statement', () => {\r\n        it('should analyze bank statement', async () => {\r\n            const response = await request(app)\r\n                .post('/api/analysis/statement')\r\n                .attach('bankStatement', TEST_PDF_PATH);\r\n\r\n            expect(response.status).toBe(200);\r\n            expect(response.body).toHaveProperty('success', true);\r\n            expect(response.body.data).toHaveProperty('summary');\r\n        });\r\n    });\r\n});"],"mappings":";;AAAAA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC;EAAEC,IAAI,EAAE;AAAY,CAAC,CAAC;AAC/C,MAAMC,OAAO,GAAGH,OAAO,CAAC,WAAW,CAAC;AACpC,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMI,GAAG,GAAGJ,OAAO,CAAC,YAAY,CAAC;AAEjCK,QAAQ,CAAC,0BAA0B,EAAE,MAAM;EACvC,MAAMC,aAAa,GAAGJ,IAAI,CAACK,IAAI,CAACC,SAAS,EAAE,kCAAkC,CAAC;EAE9EC,SAAS,CAAC,MAAM;IACZ;IACAT,OAAO,CAAC,IAAI,CAAC,CAACU,aAAa,CACvBJ,aAAa,EACbK,MAAM,CAACC,IAAI,CAAC,kBAAkB,CAClC,CAAC;EACL,CAAC,CAAC;EAEFP,QAAQ,CAAC,iBAAiB,EAAE,MAAM;IAC9BQ,EAAE,CAAC,mCAAmC,EAAE,YAAY;MAChD,MAAMC,QAAQ,GAAG,MAAMX,OAAO,CAACC,GAAG,CAAC,CAACW,GAAG,CAAC,SAAS,CAAC;MAClDC,MAAM,CAACF,QAAQ,CAACG,MAAM,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;MACjCF,MAAM,CAACF,QAAQ,CAACK,IAAI,CAAC,CAACC,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC;IACxD,CAAC,CAAC;EACN,CAAC,CAAC;EAEFf,QAAQ,CAAC,8BAA8B,EAAE,MAAM;IAC3CQ,EAAE,CAAC,+BAA+B,EAAE,YAAY;MAC5C,MAAMC,QAAQ,GAAG,MAAMX,OAAO,CAACC,GAAG,CAAC,CAC9BiB,IAAI,CAAC,yBAAyB,CAAC,CAC/BC,MAAM,CAAC,eAAe,EAAEhB,aAAa,CAAC;MAE3CU,MAAM,CAACF,QAAQ,CAACG,MAAM,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;MACjCF,MAAM,CAACF,QAAQ,CAACK,IAAI,CAAC,CAACC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC;MACrDJ,MAAM,CAACF,QAAQ,CAACK,IAAI,CAACI,IAAI,CAAC,CAACH,cAAc,CAAC,SAAS,CAAC;IACxD,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}