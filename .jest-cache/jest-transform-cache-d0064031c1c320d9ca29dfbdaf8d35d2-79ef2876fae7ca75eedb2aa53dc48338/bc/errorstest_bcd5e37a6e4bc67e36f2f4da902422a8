9b03dbddc940bf00544bf3c4d2cdd874
"use strict";

const {
  AppError,
  PDFParseError,
  LLMError,
  ValidationError
} = require('../../src/utils/errors');
describe('Error Classes', () => {
  describe('AppError', () => {
    it('should create operational error with default values', () => {
      const error = new AppError('Test error');
      expect(error).toBeInstanceOf(Error);
      expect(error.statusCode).toBe(500);
      expect(error.status).toBe('error');
      expect(error.isOperational).toBe(true);
    });
    it('should create client error with status fail', () => {
      const error = new AppError('Bad request', 400);
      expect(error.status).toBe('fail');
      expect(error.statusCode).toBe(400);
    });
  });
  describe('Specific Error Types', () => {
    it('should create PDF parse error', () => {
      const error = new PDFParseError('Invalid PDF');
      expect(error).toBeInstanceOf(AppError);
      expect(error.statusCode).toBe(400);
      expect(error.name).toBe('PDFParseError');
    });
    it('should create LLM error with custom status code', () => {
      const error = new LLMError('API unavailable', 503);
      expect(error).toBeInstanceOf(AppError);
      expect(error.statusCode).toBe(503);
      expect(error.name).toBe('LLMError');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcHBFcnJvciIsIlBERlBhcnNlRXJyb3IiLCJMTE1FcnJvciIsIlZhbGlkYXRpb25FcnJvciIsInJlcXVpcmUiLCJkZXNjcmliZSIsIml0IiwiZXJyb3IiLCJleHBlY3QiLCJ0b0JlSW5zdGFuY2VPZiIsIkVycm9yIiwic3RhdHVzQ29kZSIsInRvQmUiLCJzdGF0dXMiLCJpc09wZXJhdGlvbmFsIiwibmFtZSJdLCJzb3VyY2VzIjpbImVycm9ycy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgQXBwRXJyb3IsIFBERlBhcnNlRXJyb3IsIExMTUVycm9yLCBWYWxpZGF0aW9uRXJyb3IgfSA9IHJlcXVpcmUoJy4uLy4uL3NyYy91dGlscy9lcnJvcnMnKTtcclxuXHJcbmRlc2NyaWJlKCdFcnJvciBDbGFzc2VzJywgKCkgPT4ge1xyXG4gICAgZGVzY3JpYmUoJ0FwcEVycm9yJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIG9wZXJhdGlvbmFsIGVycm9yIHdpdGggZGVmYXVsdCB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEFwcEVycm9yKCdUZXN0IGVycm9yJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEVycm9yKTtcclxuICAgICAgICAgICAgZXhwZWN0KGVycm9yLnN0YXR1c0NvZGUpLnRvQmUoNTAwKTtcclxuICAgICAgICAgICAgZXhwZWN0KGVycm9yLnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgICAgICAgZXhwZWN0KGVycm9yLmlzT3BlcmF0aW9uYWwpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGNsaWVudCBlcnJvciB3aXRoIHN0YXR1cyBmYWlsJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBBcHBFcnJvcignQmFkIHJlcXVlc3QnLCA0MDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGVycm9yLnN0YXR1cykudG9CZSgnZmFpbCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoZXJyb3Iuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ1NwZWNpZmljIEVycm9yIFR5cGVzJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIFBERiBwYXJzZSBlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgUERGUGFyc2VFcnJvcignSW52YWxpZCBQREYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG9CZUluc3RhbmNlT2YoQXBwRXJyb3IpO1xyXG4gICAgICAgICAgICBleHBlY3QoZXJyb3Iuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IubmFtZSkudG9CZSgnUERGUGFyc2VFcnJvcicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBMTE0gZXJyb3Igd2l0aCBjdXN0b20gc3RhdHVzIGNvZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IExMTUVycm9yKCdBUEkgdW5hdmFpbGFibGUnLCA1MDMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihBcHBFcnJvcik7XHJcbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5zdGF0dXNDb2RlKS50b0JlKDUwMyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5uYW1lKS50b0JlKCdMTE1FcnJvcicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNO0VBQUVBLFFBQVE7RUFBRUMsYUFBYTtFQUFFQyxRQUFRO0VBQUVDO0FBQWdCLENBQUMsR0FBR0MsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBRWhHQyxRQUFRLENBQUMsZUFBZSxFQUFFLE1BQU07RUFDNUJBLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTTtJQUN2QkMsRUFBRSxDQUFDLHFEQUFxRCxFQUFFLE1BQU07TUFDNUQsTUFBTUMsS0FBSyxHQUFHLElBQUlQLFFBQVEsQ0FBQyxZQUFZLENBQUM7TUFFeENRLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDLENBQUNFLGNBQWMsQ0FBQ0MsS0FBSyxDQUFDO01BQ25DRixNQUFNLENBQUNELEtBQUssQ0FBQ0ksVUFBVSxDQUFDLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDbENKLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDTSxNQUFNLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQztNQUNsQ0osTUFBTSxDQUFDRCxLQUFLLENBQUNPLGFBQWEsQ0FBQyxDQUFDRixJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzFDLENBQUMsQ0FBQztJQUVGTixFQUFFLENBQUMsNkNBQTZDLEVBQUUsTUFBTTtNQUNwRCxNQUFNQyxLQUFLLEdBQUcsSUFBSVAsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLENBQUM7TUFFOUNRLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDTSxNQUFNLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQztNQUNqQ0osTUFBTSxDQUFDRCxLQUFLLENBQUNJLFVBQVUsQ0FBQyxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ3RDLENBQUMsQ0FBQztFQUNOLENBQUMsQ0FBQztFQUVGUCxRQUFRLENBQUMsc0JBQXNCLEVBQUUsTUFBTTtJQUNuQ0MsRUFBRSxDQUFDLCtCQUErQixFQUFFLE1BQU07TUFDdEMsTUFBTUMsS0FBSyxHQUFHLElBQUlOLGFBQWEsQ0FBQyxhQUFhLENBQUM7TUFFOUNPLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDLENBQUNFLGNBQWMsQ0FBQ1QsUUFBUSxDQUFDO01BQ3RDUSxNQUFNLENBQUNELEtBQUssQ0FBQ0ksVUFBVSxDQUFDLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDbENKLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDUSxJQUFJLENBQUMsQ0FBQ0gsSUFBSSxDQUFDLGVBQWUsQ0FBQztJQUM1QyxDQUFDLENBQUM7SUFFRk4sRUFBRSxDQUFDLGlEQUFpRCxFQUFFLE1BQU07TUFDeEQsTUFBTUMsS0FBSyxHQUFHLElBQUlMLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLENBQUM7TUFFbERNLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDLENBQUNFLGNBQWMsQ0FBQ1QsUUFBUSxDQUFDO01BQ3RDUSxNQUFNLENBQUNELEtBQUssQ0FBQ0ksVUFBVSxDQUFDLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDbENKLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDUSxJQUFJLENBQUMsQ0FBQ0gsSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN2QyxDQUFDLENBQUM7RUFDTixDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=