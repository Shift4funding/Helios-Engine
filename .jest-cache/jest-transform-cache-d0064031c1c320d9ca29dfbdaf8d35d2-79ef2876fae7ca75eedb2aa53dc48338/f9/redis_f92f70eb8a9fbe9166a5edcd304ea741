4c34d55b01062a24aa4c64938f31faa2
"use strict";

const Redis = require('ioredis');
const logger = require('./logger');
const redisConfig = {
  host: process.env.REDIS_HOST,
  port: parseInt(process.env.REDIS_PORT),
  username: process.env.REDIS_USERNAME,
  password: process.env.REDIS_PASSWORD,
  connectTimeout: 5000,
  lazyConnect: true,
  tls: true
};
class RedisClient {
  constructor() {
    this.client = null;
  }
  async connect() {
    try {
      this.client = new Redis(redisConfig);
      await this.client.ping();
      return this.client;
    } catch (error) {
      logger.error('Redis connection error:', error);
      throw error;
    }
  }
  getClient() {
    if (!this.client) {
      throw new Error('Redis client not initialized');
    }
    return this.client;
  }
}
module.exports = new RedisClient();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWRpcyIsInJlcXVpcmUiLCJsb2dnZXIiLCJyZWRpc0NvbmZpZyIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiUkVESVNfSE9TVCIsInBvcnQiLCJwYXJzZUludCIsIlJFRElTX1BPUlQiLCJ1c2VybmFtZSIsIlJFRElTX1VTRVJOQU1FIiwicGFzc3dvcmQiLCJSRURJU19QQVNTV09SRCIsImNvbm5lY3RUaW1lb3V0IiwibGF6eUNvbm5lY3QiLCJ0bHMiLCJSZWRpc0NsaWVudCIsImNvbnN0cnVjdG9yIiwiY2xpZW50IiwiY29ubmVjdCIsInBpbmciLCJlcnJvciIsImdldENsaWVudCIsIkVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInJlZGlzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJlZGlzID0gcmVxdWlyZSgnaW9yZWRpcycpO1xyXG5jb25zdCBsb2dnZXIgPSByZXF1aXJlKCcuL2xvZ2dlcicpO1xyXG5cclxuY29uc3QgcmVkaXNDb25maWcgPSB7XHJcbiAgICBob3N0OiBwcm9jZXNzLmVudi5SRURJU19IT1NULFxyXG4gICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuUkVESVNfUE9SVCksXHJcbiAgICB1c2VybmFtZTogcHJvY2Vzcy5lbnYuUkVESVNfVVNFUk5BTUUsXHJcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuUkVESVNfUEFTU1dPUkQsXHJcbiAgICBjb25uZWN0VGltZW91dDogNTAwMCxcclxuICAgIGxhenlDb25uZWN0OiB0cnVlLFxyXG4gICAgdGxzOiB0cnVlXHJcbn07XHJcblxyXG5jbGFzcyBSZWRpc0NsaWVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNsaWVudCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY29ubmVjdCgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBSZWRpcyhyZWRpc0NvbmZpZyk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnBpbmcoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignUmVkaXMgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDbGllbnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZGlzIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50O1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBSZWRpc0NsaWVudCgpOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDaEMsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRWxDLE1BQU1FLFdBQVcsR0FBRztFQUNoQkMsSUFBSSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsVUFBVTtFQUM1QkMsSUFBSSxFQUFFQyxRQUFRLENBQUNKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSSxVQUFVLENBQUM7RUFDdENDLFFBQVEsRUFBRU4sT0FBTyxDQUFDQyxHQUFHLENBQUNNLGNBQWM7RUFDcENDLFFBQVEsRUFBRVIsT0FBTyxDQUFDQyxHQUFHLENBQUNRLGNBQWM7RUFDcENDLGNBQWMsRUFBRSxJQUFJO0VBQ3BCQyxXQUFXLEVBQUUsSUFBSTtFQUNqQkMsR0FBRyxFQUFFO0FBQ1QsQ0FBQztBQUVELE1BQU1DLFdBQVcsQ0FBQztFQUNkQyxXQUFXQSxDQUFBLEVBQUc7SUFDVixJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFJO0VBQ3RCO0VBRUEsTUFBTUMsT0FBT0EsQ0FBQSxFQUFHO0lBQ1osSUFBSTtNQUNBLElBQUksQ0FBQ0QsTUFBTSxHQUFHLElBQUlwQixLQUFLLENBQUNHLFdBQVcsQ0FBQztNQUNwQyxNQUFNLElBQUksQ0FBQ2lCLE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLENBQUM7TUFDeEIsT0FBTyxJQUFJLENBQUNGLE1BQU07SUFDdEIsQ0FBQyxDQUFDLE9BQU9HLEtBQUssRUFBRTtNQUNackIsTUFBTSxDQUFDcUIsS0FBSyxDQUFDLHlCQUF5QixFQUFFQSxLQUFLLENBQUM7TUFDOUMsTUFBTUEsS0FBSztJQUNmO0VBQ0o7RUFFQUMsU0FBU0EsQ0FBQSxFQUFHO0lBQ1IsSUFBSSxDQUFDLElBQUksQ0FBQ0osTUFBTSxFQUFFO01BQ2QsTUFBTSxJQUFJSyxLQUFLLENBQUMsOEJBQThCLENBQUM7SUFDbkQ7SUFDQSxPQUFPLElBQUksQ0FBQ0wsTUFBTTtFQUN0QjtBQUNKO0FBRUFNLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLElBQUlULFdBQVcsQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119