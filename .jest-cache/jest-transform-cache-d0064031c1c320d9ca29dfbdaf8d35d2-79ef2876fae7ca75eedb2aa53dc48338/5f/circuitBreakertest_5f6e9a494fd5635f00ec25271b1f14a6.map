{"version":3,"names":["circuitBreaker","require","describe","mockService","jest","fn","serviceName","beforeEach","mockReset","it","mockResolvedValue","data","result","execute","expect","toEqual","mockRejectedValue","Error","success","error","stats","getStats","state","toBe","successful","toBeGreaterThan"],"sources":["circuitBreaker.test.js"],"sourcesContent":["const circuitBreaker = require('../../src/services/circuitBreakerService');\r\n\r\ndescribe('Circuit Breaker Service', () => {\r\n    const mockService = jest.fn();\r\n    const serviceName = 'test-service';\r\n\r\n    beforeEach(() => {\r\n        mockService.mockReset();\r\n    });\r\n\r\n    it('should handle successful calls', async () => {\r\n        mockService.mockResolvedValue({ data: 'success' });\r\n\r\n        const result = await circuitBreaker.execute(serviceName, mockService, 'test');\r\n        \r\n        expect(result).toEqual({ data: 'success' });\r\n    });\r\n\r\n    it('should handle service failures', async () => {\r\n        mockService.mockRejectedValue(new Error('Service failed'));\r\n\r\n        const result = await circuitBreaker.execute(serviceName, mockService, 'test');\r\n        \r\n        expect(result).toEqual({\r\n            success: false,\r\n            error: 'test-service is temporarily unavailable'\r\n        });\r\n    });\r\n\r\n    it('should track circuit breaker stats', async () => {\r\n        mockService.mockResolvedValue({ data: 'success' });\r\n        await circuitBreaker.execute(serviceName, mockService);\r\n\r\n        const stats = circuitBreaker.getStats(serviceName);\r\n        \r\n        expect(stats.state).toBe('closed');\r\n        expect(stats.stats.successful).toBeGreaterThan(0);\r\n    });\r\n});"],"mappings":";;AAAA,MAAMA,cAAc,GAAGC,OAAO,CAAC,0CAA0C,CAAC;AAE1EC,QAAQ,CAAC,yBAAyB,EAAE,MAAM;EACtC,MAAMC,WAAW,GAAGC,IAAI,CAACC,EAAE,CAAC,CAAC;EAC7B,MAAMC,WAAW,GAAG,cAAc;EAElCC,UAAU,CAAC,MAAM;IACbJ,WAAW,CAACK,SAAS,CAAC,CAAC;EAC3B,CAAC,CAAC;EAEFC,EAAE,CAAC,gCAAgC,EAAE,YAAY;IAC7CN,WAAW,CAACO,iBAAiB,CAAC;MAAEC,IAAI,EAAE;IAAU,CAAC,CAAC;IAElD,MAAMC,MAAM,GAAG,MAAMZ,cAAc,CAACa,OAAO,CAACP,WAAW,EAAEH,WAAW,EAAE,MAAM,CAAC;IAE7EW,MAAM,CAACF,MAAM,CAAC,CAACG,OAAO,CAAC;MAAEJ,IAAI,EAAE;IAAU,CAAC,CAAC;EAC/C,CAAC,CAAC;EAEFF,EAAE,CAAC,gCAAgC,EAAE,YAAY;IAC7CN,WAAW,CAACa,iBAAiB,CAAC,IAAIC,KAAK,CAAC,gBAAgB,CAAC,CAAC;IAE1D,MAAML,MAAM,GAAG,MAAMZ,cAAc,CAACa,OAAO,CAACP,WAAW,EAAEH,WAAW,EAAE,MAAM,CAAC;IAE7EW,MAAM,CAACF,MAAM,CAAC,CAACG,OAAO,CAAC;MACnBG,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE;IACX,CAAC,CAAC;EACN,CAAC,CAAC;EAEFV,EAAE,CAAC,oCAAoC,EAAE,YAAY;IACjDN,WAAW,CAACO,iBAAiB,CAAC;MAAEC,IAAI,EAAE;IAAU,CAAC,CAAC;IAClD,MAAMX,cAAc,CAACa,OAAO,CAACP,WAAW,EAAEH,WAAW,CAAC;IAEtD,MAAMiB,KAAK,GAAGpB,cAAc,CAACqB,QAAQ,CAACf,WAAW,CAAC;IAElDQ,MAAM,CAACM,KAAK,CAACE,KAAK,CAAC,CAACC,IAAI,CAAC,QAAQ,CAAC;IAClCT,MAAM,CAACM,KAAK,CAACA,KAAK,CAACI,UAAU,CAAC,CAACC,eAAe,CAAC,CAAC,CAAC;EACrD,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}