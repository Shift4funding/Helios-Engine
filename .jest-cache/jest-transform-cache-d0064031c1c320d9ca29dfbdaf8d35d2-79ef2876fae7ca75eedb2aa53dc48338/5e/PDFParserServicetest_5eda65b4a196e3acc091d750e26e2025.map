{"version":3,"names":["PDFParserService","require","fs","promises","path","describe","samplePDFBuffer","beforeAll","pdfPath","join","__dirname","validPDF","writeFile","Buffer","from","error","console","it","result","parseStatement","expect","toHaveProperty","transactions","length","toBeGreaterThan","firstTransaction","toEqual","date","description","amount"],"sources":["PDFParserService.test.js"],"sourcesContent":["const PDFParserService = require('../../src/services/pdfParserService');\r\nconst fs = require('fs').promises;\r\nconst path = require('path');\r\n\r\ndescribe('PDFParserService', () => {\r\n    let samplePDFBuffer;\r\n\r\n    beforeAll(async () => {\r\n        const pdfPath = path.join(__dirname, '../fixtures/sample-statement.pdf');\r\n        try {\r\n            // Valid PDF structure\r\n            const validPDF = `%PDF-1.4\r\n%����\r\n1 0 obj\r\n<< /Type /Catalog\r\n   /Pages 2 0 R\r\n>>\r\nendobj\r\n2 0 obj\r\n<< /Type /Pages\r\n   /Kids [3 0 R]\r\n   /Count 1\r\n>>\r\nendobj\r\n3 0 obj\r\n<< /Type /Page\r\n   /Parent 2 0 R\r\n   /MediaBox [0 0 612 792]\r\n   /Contents 4 0 R\r\n>>\r\nendobj\r\n4 0 obj\r\n<< /Length 100 >>\r\nstream\r\nBT\r\n/F1 12 Tf\r\n72 720 Td\r\n(05/15/23 GROCERY STORE PURCHASE -123.45\r\n05/16/23 SALARY DEPOSIT 2500.00\r\n05/17/23 UTILITY BILL -85.99) Tj\r\nET\r\nendstream\r\nendobj\r\nxref\r\n0 5\r\n0000000000 65535 f\r\n0000000010 00000 n\r\n0000000060 00000 n\r\n0000000120 00000 n\r\n0000000200 00000 n\r\ntrailer\r\n<< /Size 5\r\n   /Root 1 0 R\r\n>>\r\nstartxref\r\n350\r\n%%EOF`;\r\n\r\n            await fs.writeFile(pdfPath, validPDF);\r\n            samplePDFBuffer = Buffer.from(validPDF);\r\n        } catch (error) {\r\n            console.error('Failed to create test PDF:', error);\r\n            throw error;\r\n        }\r\n    });\r\n\r\n    it('should parse Chase bank statement format', async () => {\r\n        const result = await PDFParserService.parseStatement(samplePDFBuffer, 'CHASE');\r\n        \r\n        expect(result).toHaveProperty('transactions');\r\n        expect(result.transactions.length).toBeGreaterThan(0);\r\n        \r\n        const firstTransaction = result.transactions[0];\r\n        expect(firstTransaction).toEqual({\r\n            date: '05/15/23',\r\n            description: 'GROCERY STORE PURCHASE',\r\n            amount: -123.45\r\n        });\r\n    });\r\n});"],"mappings":";;AAAA,MAAMA,gBAAgB,GAAGC,OAAO,CAAC,qCAAqC,CAAC;AACvE,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAI,CAAC,CAACE,QAAQ;AACjC,MAAMC,IAAI,GAAGH,OAAO,CAAC,MAAM,CAAC;AAE5BI,QAAQ,CAAC,kBAAkB,EAAE,MAAM;EAC/B,IAAIC,eAAe;EAEnBC,SAAS,CAAC,YAAY;IAClB,MAAMC,OAAO,GAAGJ,IAAI,CAACK,IAAI,CAACC,SAAS,EAAE,kCAAkC,CAAC;IACxE,IAAI;MACA;MACA,MAAMC,QAAQ,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;MAEM,MAAMT,EAAE,CAACU,SAAS,CAACJ,OAAO,EAAEG,QAAQ,CAAC;MACrCL,eAAe,GAAGO,MAAM,CAACC,IAAI,CAACH,QAAQ,CAAC;IAC3C,CAAC,CAAC,OAAOI,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD,MAAMA,KAAK;IACf;EACJ,CAAC,CAAC;EAEFE,EAAE,CAAC,0CAA0C,EAAE,YAAY;IACvD,MAAMC,MAAM,GAAG,MAAMlB,gBAAgB,CAACmB,cAAc,CAACb,eAAe,EAAE,OAAO,CAAC;IAE9Ec,MAAM,CAACF,MAAM,CAAC,CAACG,cAAc,CAAC,cAAc,CAAC;IAC7CD,MAAM,CAACF,MAAM,CAACI,YAAY,CAACC,MAAM,CAAC,CAACC,eAAe,CAAC,CAAC,CAAC;IAErD,MAAMC,gBAAgB,GAAGP,MAAM,CAACI,YAAY,CAAC,CAAC,CAAC;IAC/CF,MAAM,CAACK,gBAAgB,CAAC,CAACC,OAAO,CAAC;MAC7BC,IAAI,EAAE,UAAU;MAChBC,WAAW,EAAE,wBAAwB;MACrCC,MAAM,EAAE,CAAC;IACb,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}