0d57d38f88c69ebff5982f5463d339a5
"use strict";

const express = require('express');
const dotenv = require('dotenv');
const app = require('../app'); // Fix the relative path
const config = require('./config/env');
const logger = require('./config/logger');
const connectDB = require('./config/database');
const swaggerUi = require('swagger-ui-express');
const swaggerJsdoc = require('swagger-jsdoc');

// Load environment variables from .env file
dotenv.config();

// Verify required dependencies
try {
  require('swagger-ui-express');
  require('swagger-jsdoc');
} catch (error) {
  console.error('Missing required dependencies. Please run:');
  console.error('npm install swagger-ui-express swagger-jsdoc');
  process.exit(1);
}
const options = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'Bank Statement Analyzer API',
      version: '1.0.0',
      description: 'API for analyzing bank statements'
    },
    servers: [{
      url: 'http://localhost:3000',
      description: 'Development server'
    }]
  },
  apis: ['./src/routes/*.js']
};
const swaggerSpec = swaggerJsdoc(options);
const router = express.Router();
router.use('/', swaggerUi.serve);
router.get('/', swaggerUi.setup(swaggerSpec));
app.use('/api-docs', router);
async function startServer() {
  try {
    // Connect to MongoDB
    await connectDB();
    const server = app.listen(config.server.port, () => {
      logger.info(`Server running in ${config.env} mode on http://${config.server.host}:${config.server.port}`);
      logger.info(`API Documentation available at http://${config.server.host}:${config.server.port}/api-docs`);
    });

    // ...existing code...
  } catch (error) {
    logger.error('Failed to start server:', error);
    process.exit(1);
  }
}
startServer();
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImRvdGVudiIsImFwcCIsImNvbmZpZyIsImxvZ2dlciIsImNvbm5lY3REQiIsInN3YWdnZXJVaSIsInN3YWdnZXJKc2RvYyIsImVycm9yIiwiY29uc29sZSIsInByb2Nlc3MiLCJleGl0Iiwib3B0aW9ucyIsImRlZmluaXRpb24iLCJvcGVuYXBpIiwiaW5mbyIsInRpdGxlIiwidmVyc2lvbiIsImRlc2NyaXB0aW9uIiwic2VydmVycyIsInVybCIsImFwaXMiLCJzd2FnZ2VyU3BlYyIsInJvdXRlciIsIlJvdXRlciIsInVzZSIsInNlcnZlIiwiZ2V0Iiwic2V0dXAiLCJzdGFydFNlcnZlciIsInNlcnZlciIsImxpc3RlbiIsInBvcnQiLCJlbnYiLCJob3N0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRvY3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgZG90ZW52ID0gcmVxdWlyZSgnZG90ZW52Jyk7XHJcbmNvbnN0IGFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpOyAgLy8gRml4IHRoZSByZWxhdGl2ZSBwYXRoXHJcbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnL2VudicpO1xyXG5jb25zdCBsb2dnZXIgPSByZXF1aXJlKCcuL2NvbmZpZy9sb2dnZXInKTtcclxuY29uc3QgY29ubmVjdERCID0gcmVxdWlyZSgnLi9jb25maWcvZGF0YWJhc2UnKTtcclxuY29uc3Qgc3dhZ2dlclVpID0gcmVxdWlyZSgnc3dhZ2dlci11aS1leHByZXNzJyk7XHJcbmNvbnN0IHN3YWdnZXJKc2RvYyA9IHJlcXVpcmUoJ3N3YWdnZXItanNkb2MnKTtcclxuXHJcbi8vIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gLmVudiBmaWxlXHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbi8vIFZlcmlmeSByZXF1aXJlZCBkZXBlbmRlbmNpZXNcclxudHJ5IHtcclxuICAgIHJlcXVpcmUoJ3N3YWdnZXItdWktZXhwcmVzcycpO1xyXG4gICAgcmVxdWlyZSgnc3dhZ2dlci1qc2RvYycpO1xyXG59IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignTWlzc2luZyByZXF1aXJlZCBkZXBlbmRlbmNpZXMuIFBsZWFzZSBydW46Jyk7XHJcbiAgICBjb25zb2xlLmVycm9yKCducG0gaW5zdGFsbCBzd2FnZ2VyLXVpLWV4cHJlc3Mgc3dhZ2dlci1qc2RvYycpO1xyXG4gICAgcHJvY2Vzcy5leGl0KDEpO1xyXG59XHJcblxyXG5jb25zdCBvcHRpb25zID0ge1xyXG4gICAgZGVmaW5pdGlvbjoge1xyXG4gICAgICAgIG9wZW5hcGk6ICczLjAuMCcsXHJcbiAgICAgICAgaW5mbzoge1xyXG4gICAgICAgICAgICB0aXRsZTogJ0JhbmsgU3RhdGVtZW50IEFuYWx5emVyIEFQSScsXHJcbiAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQVBJIGZvciBhbmFseXppbmcgYmFuayBzdGF0ZW1lbnRzJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VydmVyczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdEZXZlbG9wbWVudCBzZXJ2ZXInXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAgYXBpczogWycuL3NyYy9yb3V0ZXMvKi5qcyddXHJcbn07XHJcblxyXG5jb25zdCBzd2FnZ2VyU3BlYyA9IHN3YWdnZXJKc2RvYyhvcHRpb25zKTtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIudXNlKCcvJywgc3dhZ2dlclVpLnNlcnZlKTtcclxucm91dGVyLmdldCgnLycsIHN3YWdnZXJVaS5zZXR1cChzd2FnZ2VyU3BlYykpO1xyXG5cclxuYXBwLnVzZSgnL2FwaS1kb2NzJywgcm91dGVyKTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0U2VydmVyKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBDb25uZWN0IHRvIE1vbmdvREJcclxuICAgICAgICBhd2FpdCBjb25uZWN0REIoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VydmVyID0gYXBwLmxpc3Rlbihjb25maWcuc2VydmVyLnBvcnQsICgpID0+IHtcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oYFNlcnZlciBydW5uaW5nIGluICR7Y29uZmlnLmVudn0gbW9kZSBvbiBodHRwOi8vJHtjb25maWcuc2VydmVyLmhvc3R9OiR7Y29uZmlnLnNlcnZlci5wb3J0fWApO1xyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhgQVBJIERvY3VtZW50YXRpb24gYXZhaWxhYmxlIGF0IGh0dHA6Ly8ke2NvbmZpZy5zZXJ2ZXIuaG9zdH06JHtjb25maWcuc2VydmVyLnBvcnR9L2FwaS1kb2NzYCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIC4uLmV4aXN0aW5nIGNvZGUuLi5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc3RhcnQgc2VydmVyOicsIGVycm9yKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnN0YXJ0U2VydmVyKCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNRSxHQUFHLEdBQUdGLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFFO0FBQ2hDLE1BQU1HLE1BQU0s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